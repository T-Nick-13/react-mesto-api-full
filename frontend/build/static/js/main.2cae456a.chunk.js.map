{"version":3,"sources":["contexts/CurrentUserContext.js","images/logo.svg","components/Header.js","components/Card.js","components/Main.js","components/ImagePopup.js","utils/Api.js","components/PopupWithForm.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","components/AddPlacePopup.js","components/ConfirmationPopup.js","components/Login.js","components/Register.js","components/ProtectedRoute.js","images/Registered.svg","images/UnRegistered.svg","components/InfoTooltip.js","utils/auth.js","components/Footer.js","components/App.js","reportWebVitals.js","index.js"],"names":["CurrentUserContext","React","createContext","Header","props","className","src","logoPath","alt","children","to","headerRoute","headerClass","onClick","handleSignOut","headerLink","Card","card","onCardLike","onCardClick","onCardDelete","currentUser","useContext","isOwn","owner","_id","cardDeleteButtonClassName","isLiked","likes","some","i","cardLikeButtonClassName","link","name","type","length","Main","email","onEditAvatar","avatar","onEditProfile","about","onAddPlace","cards","map","handleCardClick","handleCardLike","handleCardDelete","ImagePopup","onClose","Api","baseUrl","headers","this","_url","_headers","res","ok","json","Promise","reject","fetch","then","_checkServerResponse","data","method","body","JSON","stringify","cardId","saveLike","deleteLike","PopupWithForm","isOpen","title","noValidate","onSubmit","btnValue","EditProfilePopup","useState","setName","description","setDescription","useEffect","e","preventDefault","onUpdateUser","id","placeholder","minLength","maxLength","required","value","onChange","target","EditAvatarPopup","onUpdateAvatar","inputLink","useRef","current","ref","AddPlacePopup","cardTitle","setCardTitle","cardLink","setCardLink","ConfirmationPopup","Login","handleLogin","password","setData","handleChange","username","Register","onRegister","ProtectedRoute","Component","component","loggedIn","infoTooltip","registered","LogoRegistered","LogoUnRegistered","BASE_URL","checkResponse","response","Footer","App","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","isAddPlacePopupOpen","setIsAddPlacePopupOpen","isInfoTooltipPopupOpen","setIsInfoTooltipPopupOpen","setCards","selectedCard","setSelectedCard","setCurrentUser","loading","setLoading","loadingPlace","setLoadingPlace","setLoggedIn","setEmail","setRegistered","history","useHistory","token","localStorage","getItem","api","auth","Authorization","closeAllPopups","push","catch","err","console","log","tokenCheck","all","getUserData","getInitialCards","userInfo","initialCards","handleEscClose","evt","key","document","addEventListener","removeEventListener","Provider","path","setItem","userAvatar","removeItem","changeLikeCardStatus","newCard","newCards","c","deleteCard","filter","InfoTooltip","saveUserData","inputValues","saveNewCard","saveAvatar","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.2cae456a.chunk.js","sourcesContent":["import React from 'react'\n\nexport const CurrentUserContext = React.createContext();\n","export default __webpack_public_path__ + \"static/media/logo.c2821b38.svg\";","import { Link } from 'react-router-dom';\nimport logoPath from '../images/logo.svg';\n\nfunction Header(props) {\n  return (\n    <header className=\"header page__header\">\n      <img className=\"header__logo\" src={logoPath} alt=\"Лого Mesto\"/>\n        <div className=\"header__container\">\n          {props.children}\n          <Link to={props.headerRoute} className={props.headerClass} onClick={props.handleSignOut}>{props.headerLink}</Link>\n        </div>\n    </header>\n  )\n}\n\nexport default Header;\n","import React from 'react';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\n\nfunction Card( { card, onCardLike, onCardClick, onCardDelete }) {\n\n  const currentUser = React.useContext(CurrentUserContext);\n\n  const isOwn = card.owner._id === currentUser._id;\n\n  const cardDeleteButtonClassName = (`elements__del ${isOwn ? 'elements__del_active' : ''}`);\n\n  const isLiked = card.likes.some(i => i._id === currentUser._id);\n  const cardLikeButtonClassName = (`elements__like ${isLiked ? 'elements__like_active' : ''}`);\n\n\n  function handleClick() {\n    onCardClick({\n      link: card.link,\n      name: card.name\n    });\n  }\n\n  function handleLikeClick() {\n    onCardLike(card);\n  }\n\n  function handleDeleteClick() {\n    onCardDelete(card);\n  }\n\n\n  return(\n    <li className=\"elements__element\">\n      <img className=\"elements__img\" src={card.link} alt={card.name} onClick={handleClick} />\n      <div className=\"elements__container\">\n        <h2 className=\"elements__title\">{card.name}</h2>\n        <div className=\"elements__like-container\">\n          <button type=\"button\" className={cardLikeButtonClassName} src=\"./images/Vector.svg\" alt=\"Изображение отметка Нравится\"\n          onClick={handleLikeClick} ></button>\n          <p className=\"elements__like-counter\">{card.likes.length}</p>\n        </div>\n      </div>\n      <button type=\"button\" className={cardDeleteButtonClassName} src=\"./images/Group.svg\" alt=\"Изображение удалить\"\n      onClick={handleDeleteClick} ></button>\n    </li>\n  )\n}\n\nexport default Card\n","import React from 'react';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\nimport Header from './Header.js';\nimport Card from './Card.js';\n\nfunction Main(props) {\n\n  const currentUser = React.useContext(CurrentUserContext);\n\n  return (\n    <>\n      <Header headerRoute=\"/sign-in\" headerLink=\"Выйти\" handleSignOut={props.handleSignOut} headerClass=\"header__link_grey\">\n        <p className=\"header__user\">{props.email}</p>\n      </Header>\n      <main>\n        <section\n          className=\"profile page__profile\">\n          <div className=\"profile__container\">\n            <div className=\"profile__avatar_overlay\" onClick={props.onEditAvatar} ></div>\n            <img className=\"profile__avatar\" src={currentUser.avatar} alt=\"Изображение аватар\" />\n            <div className=\"profile__info\">\n              <div className=\"profile__container-name\">\n                <h1 className=\"profile__name\">{currentUser.name}</h1>\n                <button type=\"button\" className=\"profile__edit-button\" onClick={props.onEditProfile}></button>\n              </div>\n              <p className=\"profile__occupation\">{currentUser.about}</p>\n            </div>\n\n          </div>\n          <button type=\"button\" className=\"profile__add-button\" onClick={props.onAddPlace}></button>\n        </section>\n        <ul className=\"elements page__elements\">\n          {\n            props.cards.map((card)=>{\n              return (\n                <Card\n                  key={card._id}\n                  card={card}\n                  onCardClick={props.handleCardClick}\n                  onCardLike={props.handleCardLike}\n                  onCardDelete={props.handleCardDelete}\n                />\n              )\n            })\n          }\n        </ul>\n      </main>\n    </>\n  )\n}\n\nexport default Main;\n","function ImagePopup(props) {\n  return(\n    <div className={`popup-image ${props.card.link ? 'popup_opened' : ''}`} >\n      <div className=\"popup-image__container\">\n        <img className=\"popup-image__picture\" src={props.card.link} alt={props.card.name} />\n        <p className=\"popup-image__title\">{props.card.name}</p>\n        <button className=\"popup-image__close-btn popup__close-btn\" type=\"button\" onClick={props.onClose} ></button>\n      </div>\n    </div>\n  )\n}\n\nexport default ImagePopup\n","class Api {\n  constructor({ baseUrl, headers }) {\n    this._url = baseUrl;\n    this._headers = headers;\n  }\n\n  _checkServerResponse(res) {\n    if (res.ok) {\n      return res.json()\n    }\n    return Promise.reject('Some error')\n  }\n\n\n  getInitialCards() {\n    return fetch(`${this._url}/cards`, {\n      headers: this._headers\n    })\n    .then(this._checkServerResponse);\n  }\n\n\n  saveNewCard(data) {\n    return fetch(`${this._url}/cards`, {\n      method: 'POST',\n      headers: this._headers,\n      body: JSON.stringify(data)\n    })\n    .then(this._checkServerResponse);\n  }\n\n\n  deleteCard(cardId) {\n    return fetch(`${this._url}/cards/${cardId}`, {\n      method: 'DELETE',\n      headers: this._headers\n    })\n    .then(this._checkServerResponse);\n  }\n\n\n  getUserData() {\n    return fetch(`${this._url}/users/me`, {\n      headers: this._headers\n    })\n    .then(this._checkServerResponse);\n  }\n\n\n  saveUserData(data) {\n    return fetch(`${this._url}/users/me`, {\n      method: 'PATCH',\n      headers: this._headers,\n      body: JSON.stringify(data)\n    })\n    .then(this._checkServerResponse);\n  }\n\n\n  saveAvatar(data) {\n    return fetch(`${this._url}/users/me/avatar`, {\n      method: 'PATCH',\n      headers: this._headers,\n      body: JSON.stringify(data)\n    })\n    .then(this._checkServerResponse);\n  }\n\n\n  saveLike(cardId) {\n    return fetch(`${this._url}/cards/likes/${cardId}`, {\n      method: 'PUT',\n      headers: this._headers,\n    })\n    .then(this._checkServerResponse);\n  }\n\n\n  deleteLike(cardId) {\n    return fetch(`${this._url}/cards/likes/${cardId}`, {\n      method: 'DELETE',\n      headers: this._headers,\n    })\n    .then(this._checkServerResponse);\n  }\n\n  changeLikeCardStatus(cardId, isLiked) {\n    return isLiked ? this.saveLike(cardId) : this.deleteLike(cardId);\n  }\n\n}\n\n\n/* const api = new Api ({\n  url: 'https://mesto.nomoreparties.co/v1/cohort-17',\n  headers: {\n    //\"Authorization\": `Bearer ${token}`,\n    authorization: 'd0f4e15e-5e8f-4105-8cb3-71e6a52f3645',\n    'content-type': 'application/json'\n  }\n}); */\n\nexport default Api\n","\nfunction PopupWithForm(props) {\n\n  return(\n    <div className={`popup popup${props.name} ${props.isOpen ? 'popup_opened' : ''}`} >\n      <div className=\"popup__container\" >\n        <h2 className=\"popup__heading\">{props.title}</h2>\n        <form className=\"popup__form popup__form_profile\" noValidate onSubmit={props.onSubmit} >{props.children}\n        <button className=\"popup__btn\" type=\"submit\">{props.btnValue}</button>\n        </form>\n        <button className=\"popup__close-btn\" type=\"button\" onClick={props.onClose}></button>\n      </div>\n    </div>\n  )\n}\n\nexport default PopupWithForm\n\n/*\n«Редактировать профиль»\n«Новое место»\n«Обновить аватар»\n«Вы уверены?»\n*/\n","import React from 'react';\nimport PopupWithForm from './PopupWithForm.js';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\n\nfunction EditProfilePopup(props) {\n\n  const [name, setName] = React.useState('');\n  const [description, setDescription] = React.useState('');\n\n  const currentUser = React.useContext(CurrentUserContext);\n\n  function handleChangeName(e) {\n    setName(e.target.value);\n  }\n\n  function handleChangeDescription(e) {\n    setDescription(e.target.value);\n  }\n\n  function handleSubmit(e) {\n    e.preventDefault();\n    props.onUpdateUser({\n      name,\n      about: description,\n    });\n  }\n\n  React.useEffect(() => {\n    if (currentUser) {\n    setName(currentUser.name);\n    setDescription(currentUser.about);\n    }\n  }, [currentUser]);\n\n\n  return (\n    <PopupWithForm name=\"profile\"\n      title=\"Редактировать профиль\"\n      isOpen={props.isOpen}\n      onClose={props.onClose}\n      btnValue={props.btnValue}\n      onSubmit={handleSubmit} >\n        <input\n          id=\"input-name\"\n          type=\"text\"\n          placeholder=\"Имя\"\n          className=\"popup__text popup__text_name\"\n          minLength=\"2\"\n          maxLength=\"40\"\n          required\n          value={name}\n          onChange={handleChangeName}\n          name=\"name\"\n        />\n        <span\n          id=\"input-name-error\"\n          className=\"popup__text-error\">\n        </span>\n        <input\n          id=\"input-occupation\"\n          type=\"text\" placeholder=\"О себе\"\n          className=\"popup__text popup__text_occupation\"\n          minLength=\"2\" maxLength=\"200\"\n          required\n          value={description}\n          onChange={handleChangeDescription}\n          name=\"about\"\n        />\n        <span\n          id=\"input-occupation-error\"\n          className=\"popup__text-error\">\n        </span>\n    </PopupWithForm>\n  )\n}\n\nexport default EditProfilePopup\n","import React from 'react';\nimport PopupWithForm from './PopupWithForm.js';\n\nfunction EditAvatarPopup({ onUpdateAvatar, isOpen, onClose, btnValue }) {\n\n  const inputLink = React.useRef();\n\n  function handleSubmit(e) {\n    e.preventDefault();\n    onUpdateAvatar({\n      avatar: inputLink.current.value\n    });\n  }\n\n\n  return (\n    <PopupWithForm\n      name=\"-avatar\"\n      title=\"Обновить аватар\"\n      btnValue={btnValue}\n      isOpen={isOpen}\n      onClose={onClose}\n      onSubmit={handleSubmit} >\n      <input\n        id=\"input-link\"\n        type=\"url\"\n        placeholder=\"Ссылка на картинку\"\n        className=\"popup__text popup__text_link\"\n        ref={inputLink}\n        required/>\n      <span\n        id=\"input-link-error\"\n        className=\"popup__text-error\">\n      </span>\n    </PopupWithForm>\n  )\n}\n\nexport default EditAvatarPopup\n","import React from 'react';\nimport PopupWithForm from './PopupWithForm.js';\n\nfunction AddPlacePopup({ onAddPlace, isOpen, onClose, btnValue }) {\n\n  const [cardTitle, setCardTitle] = React.useState('');\n  const [cardLink, setCardLink] = React.useState('');\n\n  function handleChangeName(e) {\n    setCardTitle(e.target.value);\n  }\n\n  function handleChangeLink(e) {\n    setCardLink(e.target.value);\n  }\n\n  function handleSubmit(e) {\n    e.preventDefault();\n    onAddPlace({\n      name: cardTitle,\n      link: cardLink\n    });\n    setCardTitle('');\n    setCardLink('')\n  }\n\n\n  return (\n    <PopupWithForm\n      name=\"_card\"\n      title=\"Новое место\"\n      isOpen={isOpen}\n      onClose={onClose}\n      btnValue={btnValue}\n      onSubmit={handleSubmit} >\n      <input id=\"input-place\"\n        type=\"text\"\n        placeholder=\"Название\"\n        className=\"popup__text popup__text_place\"\n        minLength=\"1\"\n        maxLength=\"30\"\n        required\n        onChange={handleChangeName}\n        value={cardTitle} />\n      <span id=\"input-place-error\"\n        className=\"popup__text-error\">\n      </span>\n      <input id=\"input-link\"\n        type=\"url\"\n        placeholder=\"Ссылка на картинку\"\n        className=\"popup__text popup__text_link\"\n        required\n        onChange={handleChangeLink}\n        value={cardLink} />\n      <span\n        id=\"input-link-error\"\n        className=\"popup__text-error\">\n      </span>\n    </PopupWithForm>\n  )\n}\n\nexport default AddPlacePopup\n","import React from 'react';\nimport PopupWithForm from './PopupWithForm.js';\n\nfunction ConfirmationPopup() {\n\n  return (\n    <PopupWithForm\n      name=\"-submit\"\n      title=\"Вы уверены?\"\n      btnValue=\"Да\" >\n    </PopupWithForm>\n  )\n}\n\nexport default ConfirmationPopup\n","import React, { useState } from 'react';\nimport Header from './Header.js';\n\nfunction Login({handleLogin}) {\n\n  const [data, setData] = useState({\n    email: '',\n    password: ''\n  })\n\n  function handleChange(e) {\n    const {name, value} = e.target;\n    setData({\n      ...data,\n      [name]: value\n    });\n  }\n\n  function handleSubmit(e) {\n    e.preventDefault();\n    handleLogin(data);\n  }\n\n  return(\n    <div className=\"page-auth\">\n      <Header headerRoute=\"/sign-up\" headerLink=\"Регистрация\" headerClass=\"header__link\"/>\n      <div className=\"auth\">\n        <p className=\"auth__heading\">Вход</p>\n        <form onSubmit={handleSubmit} className=\"auth__form\">\n          <input id=\"email\" className=\"auth__input\" required name=\"email\" type=\"email\"\n            value={data.username} onChange={handleChange} placeholder=\"Email\" />\n          <input id=\"password\" className=\"auth__input\" required name=\"password\" type=\"password\"\n            value={data.password} onChange={handleChange} placeholder=\"Пароль\" />\n          <button type=\"submit\" className=\"auth__btn\">Войти</button>\n        </form>\n      </div>\n    </div>\n  )\n}\n\nexport default Login;\n","import React, { useState } from 'react';\nimport Header from './Header.js';\nimport { Link } from 'react-router-dom';\n\nfunction Register({onRegister}) {\n\n  const [data, setData] = useState({\n    email: '',\n    password: ''\n  });\n\n  function handleChange(e) {\n    const {name, value} = e.target;\n    setData({\n      ...data,\n      [name]: value\n    });\n  }\n\n  function handleSubmit(e) {\n    e.preventDefault();\n    onRegister(data)\n  }\n\n  return(\n    <div className=\"page-auth\">\n      <Header headerRoute=\"/sign-in\" headerLink=\"Войти\" headerClass=\"header__link\" />\n      <div className=\"auth\">\n        <p className=\"auth__heading\">Регистрация</p>\n        <form onSubmit={handleSubmit} className=\"auth__form\">\n          <input id=\"username\" className=\"auth__input\" required name=\"email\" type=\"email\"\n            value={data.username} onChange={handleChange} placeholder=\"Email\" />\n          <input id=\"password\" className=\"auth__input\" required name=\"password\" type=\"password\"\n            value={data.password} onChange={handleChange} placeholder=\"Пароль\" />\n          <button type=\"submit\" className=\"auth__btn\">Зарегистрироваться</button>\n          <p className=\"auth__text\">Уже зарегистрированы?&nbsp;\n            <Link to=\"/sign-in\" className=\"auth__link\">Войти</Link>\n          </p>\n        </form>\n      </div>\n    </div>\n  )\n}\n\nexport default Register;\n","import React from 'react';\nimport { Route, Redirect } from 'react-router-dom';\n\nconst ProtectedRoute = ({ component: Component, ...props  }) => {\n  return (\n    <Route>\n      { () => props.loggedIn ? <Component {...props} /> : <Redirect to=\"/sign-in\" /> }\n    </Route>\n)}\n\n\nexport default ProtectedRoute;\n","export default __webpack_public_path__ + \"static/media/Registered.1b6082f8.svg\";","export default __webpack_public_path__ + \"static/media/UnRegistered.df8eddf6.svg\";","import LogoRegistered from '../images/Registered.svg';\nimport LogoUnRegistered from '../images/UnRegistered.svg';\n\nfunction infoTooltip(props) {\n\n  return(\n    <div className={`popup ${props.isOpen ? 'popup_active' : ''}`} >\n      <div className=\"popup__container\" >\n        <img className=\"popup__regLogo\" src={props.registered ? LogoRegistered : LogoUnRegistered } alt=\"Лого результат регистрации\" />\n        <p className=\"popup__RegText\">{props.registered ? 'Вы успешно зарегистрировались!' : 'Что-то пошло не так! Попробуйте ещё раз.'}\n        </p>\n        <button className=\"popup__close-btn\" type=\"button\" onClick={props.onClose}></button>\n      </div>\n    </div>\n  )\n}\n\nexport default infoTooltip;\n","export const BASE_URL = 'http://api.ntitov.students.nomoreparties.space';\n\nfunction checkResponse(response) {\n  if (response.ok) {\n    return response.json();\n  }\n  else {\n    return Promise.reject('Ошибка на сервере');\n  }\n}\n\nexport const authorize = (email, password) => {\n  return fetch(`${BASE_URL}/signin`, {\n    method: 'POST',\n    headers: {\n      'Accept': 'application/json',\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({email, password})\n  })\n  .then(checkResponse);\n};\n\nexport const register = (email, password) => {\n  return fetch(`${BASE_URL}/signup`, {\n    method: 'POST',\n    headers: {\n      'Accept': 'application/json',\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({email, password})\n  })\n  .then(checkResponse)\n};\n\n\nexport const getContent = (token) => {\n  return fetch(`${BASE_URL}/users/me`, {\n    method: 'GET',\n    headers: {\n      \"Content-Type\": \"application/json\",\n      \"Authorization\": `Bearer ${token}`\n    }\n  })\n  .then(checkResponse);\n};\n","function Footer() {\n  return (\n    <footer className=\"footer page__footer\">\n      <p className=\"footer__copyright\">&copy; 2020 Mesto Russia</p>\n    </footer>\n  )\n}\n\nexport default Footer;\n","import React from 'react';\nimport { Route, Switch, Redirect, useHistory } from 'react-router-dom';\nimport Main from './Main.js';\nimport ImagePopup from './ImagePopup.js';\nimport Api from '../utils/Api.js';\nimport EditProfilePopup from './EditProfilePopup.js';\nimport EditAvatarPopup from './EditAvatarPopup.js';\nimport AddPlacePopup from './AddPlacePopup.js';\nimport ConfirmationPopup from './ConfirmationPopup.js';\nimport Login from './Login.js';\nimport Register from './Register.js';\nimport ProtectedRoute from './ProtectedRoute.js';\nimport InfoTooltip from './InfoTooltip.js';\nimport * as auth from '../utils/auth.js';\nimport Footer from './Footer.js';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext.js';\n\nfunction App() {\n\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = React.useState(false);\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = React.useState(false);\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = React.useState(false);\n  const [isInfoTooltipPopupOpen, setIsInfoTooltipPopupOpen] = React.useState(false);\n  const [cards, setCards] = React.useState([]);\n  const [selectedCard, setSelectedCard] = React.useState({});\n  const [currentUser, setCurrentUser] = React.useState('');\n  const [loading, setLoading] = React.useState('Сохранить');\n  const [loadingPlace, setLoadingPlace] = React.useState('Создать');\n\n  const [loggedIn, setLoggedIn] = React.useState(false);\n  const [email, setEmail] = React.useState('');\n  const [registered, setRegistered] = React.useState(false);\n\n  const history = useHistory();\n  const token = localStorage.getItem('token');\n\n  const api = new Api({\n    baseUrl: auth.BASE_URL,\n    headers: {\n      'Content-Type': 'application/json',\n      Authorization: `Bearer ${token}`,\n    },\n  });\n\n  React.useEffect(() => {\n    tokenCheck();\n  }, []);\n\n  React.useEffect(() => {\n    if (loggedIn) {\n      history.push('/');\n    }\n  }, [loggedIn])\n\n\n  React.useEffect(() => {\n    Promise.all([\n      api.getUserData(),\n      api.getInitialCards()\n    ])\n    .then(([userInfo, initialCards]) => {\n      setCurrentUser(userInfo);\n      setCards(initialCards)\n    })\n    .catch((err) => {\n      console.log(err);\n    })\n  }, [])\n\n\n  React.useEffect(() => {\n    const ESC = 'Escape';\n    function handleEscClose(evt) {\n      if (evt.key === ESC) {\n        closeAllPopups();\n      }\n    }\n    document.addEventListener('keyup', handleEscClose);\n    return () => document.removeEventListener('keyup', handleEscClose)\n  }, [])\n\n\n  function handleEditProfileClick() {\n    setIsEditProfilePopupOpen(true);\n    setLoading('Сохранить')\n  }\n\n  function handleEditAvatarClick() {\n    setIsEditAvatarPopupOpen(true);\n    setLoading('Сохранить')\n  }\n\n  function handleAddPlaceClick() {\n    setIsAddPlacePopupOpen(true);\n    setLoadingPlace('Создать')\n  }\n\n  function closeAllPopups() {\n    setIsEditProfilePopupOpen(false);\n    setIsEditAvatarPopupOpen(false);\n    setIsAddPlacePopupOpen(false);\n    setIsInfoTooltipPopupOpen(false);\n    setSelectedCard({})\n  }\n\n  function handleCardClick(card) {\n    setSelectedCard({\n      link: card.link,\n      name: card.name\n    })\n  }\n\n  function handleCardLike(card) {\n    const isLiked = card.likes.some(i => i._id === currentUser._id);\n\n    api.changeLikeCardStatus(card._id, !isLiked)\n      .then((newCard) => {\n        const newCards = cards.map((c) => c._id === card._id ? newCard : c);\n        setCards(newCards);\n    })\n      .catch((err) => {\n      console.log(err)\n      })\n\n  }\n\n  function handleCardDelete(card) {\n    api.deleteCard(card._id)\n      .then(()=>{\n        const newCards = cards.filter((c) => c._id !== card._id);\n        setCards(newCards);\n      })\n      .catch((err) => {\n        console.log(err)\n        })\n  }\n\n  function handleUpdateUser(userInfo) {\n    setLoading('Сохранение...');\n    api.saveUserData(userInfo)\n      .then((inputValues)=> {\n        setCurrentUser(inputValues);\n        closeAllPopups()\n      })\n      .catch((err) => {\n        console.log(err)\n        })\n  }\n\n  function handleUpdateAvatar(data) {\n    setLoading('Сохранение...');\n    api.saveAvatar(data)\n      .then((avatar)=> {\n        setCurrentUser(avatar);\n        closeAllPopups()\n      })\n      .catch((err) => {\n        console.log(err)\n        })\n  }\n\n  function handleAddPlaceSubmit(data) {\n    setLoadingPlace('Сохранение...')\n    api.saveNewCard(data)\n      .then((newCard)=> {\n        setCards([newCard, ...cards]);\n        closeAllPopups()\n      })\n      .catch((err) => {\n        console.log(err)\n        })\n  }\n\n  function handleLogin(data) {\n    const {email, password} = data;\n    auth.authorize(email, password)\n      .then((res) => {\n        if (res) {\n          setLoggedIn(true);\n          localStorage.setItem('token', res.token);\n          setEmail(email);\n          history.push(\"/\");\n        }\n      })\n      .catch((err) => {console.log(err)})\n  }\n\n  function handleRegister(data) {\n    const {email, password} = data;\n    auth.register(email, password)\n      .then((res) => {\n        if (res) {\n          setIsInfoTooltipPopupOpen(true);\n          setRegistered(true);\n          history.push('/sign-in');\n        }\n      })\n      .catch((err) => {\n        console.log(err);\n        setIsInfoTooltipPopupOpen(true);\n        setRegistered(false);\n      })\n  }\n\n  function tokenCheck() {\n    const token = localStorage.getItem('token');\n    if (token) {\n      auth.getContent(token)\n        .then((res) => {\n          if (res) {\n            setLoggedIn(true);\n            history.push(\"/\");\n            setEmail(res.data.email);\n          }\n        })\n        .catch((err) => {\n          console.log(err);\n        });\n    }\n\n  }\n\n\n  function handleSignOut() {\n    setLoggedIn(false);\n    localStorage.removeItem('token');\n    history.push('/sign-in')\n  }\n\n\n  return (\n    <div className=\"page\">\n      <CurrentUserContext.Provider value={currentUser}>\n\n      <Switch>\n      <Route path=\"/sign-in\">\n          <Login handleLogin={handleLogin} />\n        </Route>\n        <Route path=\"/sign-up\">\n          <Register onRegister={handleRegister} />\n        </Route>\n        <ProtectedRoute\n          path=\"/\"\n          loggedIn={loggedIn}\n          component={Main}\n          onEditProfile={handleEditProfileClick}\n          onEditAvatar={handleEditAvatarClick}\n          onAddPlace={handleAddPlaceClick}\n          userAvatar={currentUser.avatar}\n          name={currentUser.name}\n          about={currentUser.about}\n          handleSignOut={handleSignOut}\n          email={email}\n          cards={cards}\n          handleCardClick={handleCardClick}\n          handleCardLike={handleCardLike}\n          handleCardDelete={handleCardDelete}\n        />\n       <Route>\n          {loggedIn ? <Redirect to=\"/\" /> : <Redirect to=\"/sign-in\" />}\n       </Route>\n      </Switch>\n\n      <Footer />\n\n      <InfoTooltip\n        isOpen={isInfoTooltipPopupOpen}\n        onClose={closeAllPopups}\n        registered={registered} />\n\n        <EditProfilePopup\n          isOpen={isEditProfilePopupOpen}\n          onClose={closeAllPopups}\n          onUpdateUser={handleUpdateUser}\n          btnValue={loading} />\n\n        <AddPlacePopup\n          isOpen={isAddPlacePopupOpen}\n          onClose={closeAllPopups}\n          onAddPlace={handleAddPlaceSubmit}\n          btnValue={loadingPlace} />\n\n        <ImagePopup\n          card={selectedCard}\n          onClose={closeAllPopups} />\n\n        <ConfirmationPopup />\n\n        <EditAvatarPopup\n          isOpen={isEditAvatarPopupOpen}\n          onClose={closeAllPopups}\n          onUpdateAvatar={handleUpdateAvatar}\n          btnValue={loading} />\n\n      </CurrentUserContext.Provider>\n    </div>\n\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App.js';\nimport reportWebVitals from './reportWebVitals';\nimport { BrowserRouter } from 'react-router-dom';\n\nReactDOM.render(\n  <React.StrictMode>\n    <BrowserRouter >\n      <App />\n    </BrowserRouter>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}