[{"C:\\Users\\Huawei\\Рабочий стол\\YP\\react-mesto-api-full\\frontend\\src\\components\\EditProfilePopup.js":"1","C:\\Users\\Huawei\\Рабочий стол\\YP\\react-mesto-api-full\\frontend\\src\\components\\App.js":"2","C:\\Users\\Huawei\\Рабочий стол\\YP\\react-mesto-api-full\\frontend\\src\\components\\Login.js":"3","C:\\Users\\Huawei\\Рабочий стол\\YP\\react-mesto-api-full\\frontend\\src\\components\\ProtectedRoute.js":"4","C:\\Users\\Huawei\\Рабочий стол\\YP\\react-mesto-api-full\\frontend\\src\\components\\Footer.js":"5","C:\\Users\\Huawei\\Рабочий стол\\YP\\react-mesto-api-full\\frontend\\src\\utils\\Api.js":"6","C:\\Users\\Huawei\\Рабочий стол\\YP\\react-mesto-api-full\\frontend\\src\\components\\Header.js":"7","C:\\Users\\Huawei\\Рабочий стол\\YP\\react-mesto-api-full\\frontend\\src\\components\\Card.js":"8","C:\\Users\\Huawei\\Рабочий стол\\YP\\react-mesto-api-full\\frontend\\src\\index.js":"9","C:\\Users\\Huawei\\Рабочий стол\\YP\\react-mesto-api-full\\frontend\\src\\components\\Main.js":"10","C:\\Users\\Huawei\\Рабочий стол\\YP\\react-mesto-api-full\\frontend\\src\\components\\EditAvatarPopup.js":"11","C:\\Users\\Huawei\\Рабочий стол\\YP\\react-mesto-api-full\\frontend\\src\\components\\AddPlacePopup.js":"12","C:\\Users\\Huawei\\Рабочий стол\\YP\\react-mesto-api-full\\frontend\\src\\components\\ImagePopup.js":"13","C:\\Users\\Huawei\\Рабочий стол\\YP\\react-mesto-api-full\\frontend\\src\\components\\ConfirmationPopup.js":"14","C:\\Users\\Huawei\\Рабочий стол\\YP\\react-mesto-api-full\\frontend\\src\\components\\PopupWithForm.js":"15","C:\\Users\\Huawei\\Рабочий стол\\YP\\react-mesto-api-full\\frontend\\src\\reportWebVitals.js":"16","C:\\Users\\Huawei\\Рабочий стол\\YP\\react-mesto-api-full\\frontend\\src\\components\\Register.js":"17","C:\\Users\\Huawei\\Рабочий стол\\YP\\react-mesto-api-full\\frontend\\src\\components\\InfoTooltip.js":"18","C:\\Users\\Huawei\\Рабочий стол\\YP\\react-mesto-api-full\\frontend\\src\\utils\\auth.js":"19","C:\\Users\\Huawei\\Рабочий стол\\YP\\react-mesto-api-full\\frontend\\src\\contexts\\CurrentUserContext.js":"20"},{"size":1867,"mtime":1614508222778,"results":"21","hashOfConfig":"22"},{"size":7835,"mtime":1614539333335,"results":"23","hashOfConfig":"22"},{"size":1171,"mtime":1614453813751,"results":"24","hashOfConfig":"22"},{"size":304,"mtime":1614453847396,"results":"25","hashOfConfig":"22"},{"size":188,"mtime":1606659562577,"results":"26","hashOfConfig":"22"},{"size":2275,"mtime":1614630757848,"results":"27","hashOfConfig":"22"},{"size":495,"mtime":1613198564466,"results":"28","hashOfConfig":"22"},{"size":1565,"mtime":1614526542288,"results":"29","hashOfConfig":"22"},{"size":608,"mtime":1612691478264,"results":"30","hashOfConfig":"22"},{"size":1817,"mtime":1614453833239,"results":"31","hashOfConfig":"22"},{"size":872,"mtime":1608227878719,"results":"32","hashOfConfig":"22"},{"size":1499,"mtime":1613234329767,"results":"33","hashOfConfig":"22"},{"size":495,"mtime":1613231457764,"results":"34","hashOfConfig":"22"},{"size":279,"mtime":1608228172468,"results":"35","hashOfConfig":"22"},{"size":731,"mtime":1607968603892,"results":"36","hashOfConfig":"22"},{"size":362,"mtime":499162500000,"results":"37","hashOfConfig":"22"},{"size":1418,"mtime":1614453869418,"results":"38","hashOfConfig":"22"},{"size":787,"mtime":1613202472995,"results":"39","hashOfConfig":"22"},{"size":1043,"mtime":1614619038575,"results":"40","hashOfConfig":"22"},{"size":84,"mtime":1607867232017,"results":"41","hashOfConfig":"22"},{"filePath":"42","messages":"43","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},"zo5811",{"filePath":"45","messages":"46","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"47","usedDeprecatedRules":"48"},{"filePath":"49","messages":"50","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"51"},{"filePath":"52","messages":"53","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"48"},{"filePath":"54","messages":"55","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"51"},{"filePath":"56","messages":"57","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"48"},{"filePath":"58","messages":"59","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"48"},{"filePath":"60","messages":"61","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"48"},{"filePath":"62","messages":"63","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"64"},{"filePath":"65","messages":"66","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"67","messages":"68","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"64"},{"filePath":"69","messages":"70","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"71"},{"filePath":"72","messages":"73","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"74","messages":"75","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"76"},{"filePath":"77","messages":"78","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"79","messages":"80","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"81"},{"filePath":"82","messages":"83","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"48"},{"filePath":"84","messages":"85","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"86","messages":"87","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"88","messages":"89","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"C:\\Users\\Huawei\\Рабочий стол\\YP\\react-mesto-api-full\\frontend\\src\\components\\EditProfilePopup.js",[],["90","91"],"C:\\Users\\Huawei\\Рабочий стол\\YP\\react-mesto-api-full\\frontend\\src\\components\\App.js",["92","93"],"import React from 'react';\nimport { Route, Switch, Redirect, useHistory } from 'react-router-dom';\nimport Main from './Main.js';\nimport ImagePopup from './ImagePopup.js';\nimport Api from '../utils/Api.js';\nimport EditProfilePopup from './EditProfilePopup.js';\nimport EditAvatarPopup from './EditAvatarPopup.js';\nimport AddPlacePopup from './AddPlacePopup.js';\nimport ConfirmationPopup from './ConfirmationPopup.js';\nimport Login from './Login.js';\nimport Register from './Register.js';\nimport ProtectedRoute from './ProtectedRoute.js';\nimport InfoTooltip from './InfoTooltip.js';\nimport * as auth from '../utils/auth.js';\nimport Footer from './Footer.js';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext.js';\n//import defaultAvatar from '../images/kusto.jpg';\n\n\nfunction App() {\n\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = React.useState(false);\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = React.useState(false);\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = React.useState(false);\n  const [isInfoTooltipPopupOpen, setIsInfoTooltipPopupOpen] = React.useState(false);\n  const [cards, setCards] = React.useState([]);\n  const [selectedCard, setSelectedCard] = React.useState({});\n  const [currentUser, setCurrentUser] = React.useState({ });\n  const [loading, setLoading] = React.useState('Сохранить');\n  const [loadingPlace, setLoadingPlace] = React.useState('Создать');\n\n  const [loggedIn, setLoggedIn] = React.useState(false);\n  const [email, setEmail] = React.useState('');\n  const [registered, setRegistered] = React.useState(false);\n\n  const history = useHistory();\n  const token = localStorage.getItem('token');\n\n  const api = new Api({\n    baseUrl: auth.BASE_URL,\n    headers: {\n      'Content-Type': 'application/json',\n      Authorization: `Bearer ${token}`,\n    },\n  });\n\n/*\n\n  React.useEffect(() => {\n    if (loggedIn) {\n      history.push('/');\n    }\n  }, [loggedIn]) */\n\n\n  function handleEditProfileClick() {\n    setIsEditProfilePopupOpen(true);\n    setLoading('Сохранить')\n  }\n\n  function handleEditAvatarClick() {\n    setIsEditAvatarPopupOpen(true);\n    setLoading('Сохранить')\n  }\n\n  function handleAddPlaceClick() {\n    setIsAddPlacePopupOpen(true);\n    setLoadingPlace('Создать')\n  }\n\n  function closeAllPopups() {\n    setIsEditProfilePopupOpen(false);\n    setIsEditAvatarPopupOpen(false);\n    setIsAddPlacePopupOpen(false);\n    setIsInfoTooltipPopupOpen(false);\n    setSelectedCard({})\n  }\n\n  function handleCardClick(card) {\n    setSelectedCard({\n      link: card.link,\n      name: card.name\n    })\n  }\n\n  function handleCardLike(card) {\n    const isLiked = card.likes.some(i => i === currentUser._id);\n\n    api.changeLikeCardStatus(card._id, !isLiked)\n      .then((newCard) => {\n        const newCards = cards.map((c) => c._id === card._id ? newCard : c);\n        setCards(newCards);\n    })\n      .catch((err) => {\n      console.log(err)\n      })\n  }\n\n  function handleCardDelete(card) {\n    api.deleteCard(card._id)\n      .then(()=>{\n        const newCards = cards.filter((c) => c._id !== card._id);\n        setCards(newCards);\n      })\n      .catch((err) => {\n        console.log(err)\n        })\n  }\n\n  function handleUpdateUser(userInfo) {\n    setLoading('Сохранение...');\n    api.saveUserData(userInfo)\n      .then((inputValues)=> {\n        setCurrentUser(inputValues);\n        closeAllPopups()\n      })\n      .catch((err) => {\n        console.log(err)\n        })\n  }\n\n  function handleUpdateAvatar(data) {\n    setLoading('Сохранение...');\n    api.saveAvatar(data)\n      .then((avatar)=> {\n        setCurrentUser(avatar);\n        closeAllPopups()\n      })\n      .catch((err) => {\n        console.log(err)\n        })\n  }\n\n  function handleAddPlaceSubmit(data) {\n    setLoadingPlace('Сохранение...')\n    api.saveNewCard(data)\n      .then((newCard)=> {\n        setCards([newCard, ...cards]);\n        closeAllPopups()\n      })\n      .catch((err) => {\n        console.log(err)\n        })\n  }\n\n  function handleLogin(data) {\n    const {email, password} = data;\n    auth.authorize(email, password)\n      .then((res) => {\n        if (res) {\n          setLoggedIn(true);\n          localStorage.setItem('token', res.token);\n          setEmail(email);\n          history.push(\"/\");\n        }\n      })\n      .catch((err) => {console.log(err)})\n  }\n\n  function handleRegister(data) {\n    const {email, password} = data;\n    auth.register(email, password)\n      .then((res) => {\n        if (res) {\n          setIsInfoTooltipPopupOpen(true);\n          setRegistered(true);\n          history.push('/signin');\n        }\n      })\n      .catch((err) => {\n        console.log(err);\n        setIsInfoTooltipPopupOpen(true);\n        setRegistered(false);\n      })\n  }\n\n  function tokenCheck() {\n    const token = localStorage.getItem('token');\n    if (token) {\n      auth.getContent(token)\n        .then((res) => {\n          if (res) {\n            setLoggedIn(true);\n            history.push(\"/\");\n            setEmail(res.email);\n          }\n        })\n        .catch((err) => {\n          console.log(err);\n        });\n    }\n\n  }\n\n  React.useEffect(() => {\n    if (loggedIn) {\n    Promise.all([\n      api.getUserData(),\n      api.getInitialCards()\n    ])\n    .then(([userInfo, initialCards]) => {\n      setCurrentUser(userInfo);\n      setCards(initialCards)\n    })\n    .catch((err) => {\n      console.log(err);\n    })\n    }\n  }, [loggedIn])\n\n  React.useEffect(() => {\n    tokenCheck();\n  }, []);\n\n\n  React.useEffect(() => {\n    const ESC = 'Escape';\n    function handleEscClose(evt) {\n      if (evt.key === ESC) {\n        closeAllPopups();\n      }\n    }\n    document.addEventListener('keyup', handleEscClose);\n    return () => document.removeEventListener('keyup', handleEscClose)\n  }, [])\n\n\n  function handleSignOut() {\n    setLoggedIn(false);\n    localStorage.removeItem('token');\n    history.push('/signin')\n  }\n\n\n  return (\n    <div className=\"page\">\n      <CurrentUserContext.Provider value={currentUser}>\n\n      <Switch>\n      <Route path=\"/signin\">\n          <Login handleLogin={handleLogin} />\n        </Route>\n        <Route path=\"/signup\">\n          <Register onRegister={handleRegister} />\n        </Route>\n        <ProtectedRoute\n          path=\"/\"\n          loggedIn={loggedIn}\n          component={Main}\n          onEditProfile={handleEditProfileClick}\n          onEditAvatar={handleEditAvatarClick}\n          onAddPlace={handleAddPlaceClick}\n          userAvatar={currentUser.avatar}\n          name={currentUser.name}\n          about={currentUser.about}\n          handleSignOut={handleSignOut}\n          email={email}\n          cards={cards}\n          handleCardClick={handleCardClick}\n          handleCardLike={handleCardLike}\n          handleCardDelete={handleCardDelete}\n        />\n       <Route>\n          {loggedIn ? <Redirect to=\"/\" /> : <Redirect to=\"/signin\" />}\n       </Route>\n      </Switch>\n\n      <Footer />\n\n      <InfoTooltip\n        isOpen={isInfoTooltipPopupOpen}\n        onClose={closeAllPopups}\n        registered={registered} />\n\n        <EditProfilePopup\n          isOpen={isEditProfilePopupOpen}\n          onClose={closeAllPopups}\n          onUpdateUser={handleUpdateUser}\n          btnValue={loading} />\n\n        <AddPlacePopup\n          isOpen={isAddPlacePopupOpen}\n          onClose={closeAllPopups}\n          onAddPlace={handleAddPlaceSubmit}\n          btnValue={loadingPlace} />\n\n        <ImagePopup\n          card={selectedCard}\n          onClose={closeAllPopups} />\n\n        <ConfirmationPopup />\n\n        <EditAvatarPopup\n          isOpen={isEditAvatarPopupOpen}\n          onClose={closeAllPopups}\n          onUpdateAvatar={handleUpdateAvatar}\n          btnValue={loading} />\n\n      </CurrentUserContext.Provider>\n    </div>\n\n  );\n}\n\nexport default App;\n",["94","95"],"C:\\Users\\Huawei\\Рабочий стол\\YP\\react-mesto-api-full\\frontend\\src\\components\\Login.js",[],["96","97"],"C:\\Users\\Huawei\\Рабочий стол\\YP\\react-mesto-api-full\\frontend\\src\\components\\ProtectedRoute.js",[],"C:\\Users\\Huawei\\Рабочий стол\\YP\\react-mesto-api-full\\frontend\\src\\components\\Footer.js",[],"C:\\Users\\Huawei\\Рабочий стол\\YP\\react-mesto-api-full\\frontend\\src\\utils\\Api.js",[],"C:\\Users\\Huawei\\Рабочий стол\\YP\\react-mesto-api-full\\frontend\\src\\components\\Header.js",[],"C:\\Users\\Huawei\\Рабочий стол\\YP\\react-mesto-api-full\\frontend\\src\\components\\Card.js",[],"C:\\Users\\Huawei\\Рабочий стол\\YP\\react-mesto-api-full\\frontend\\src\\index.js",[],["98","99"],"C:\\Users\\Huawei\\Рабочий стол\\YP\\react-mesto-api-full\\frontend\\src\\components\\Main.js",[],"C:\\Users\\Huawei\\Рабочий стол\\YP\\react-mesto-api-full\\frontend\\src\\components\\EditAvatarPopup.js",[],"C:\\Users\\Huawei\\Рабочий стол\\YP\\react-mesto-api-full\\frontend\\src\\components\\AddPlacePopup.js",[],["100","101"],"C:\\Users\\Huawei\\Рабочий стол\\YP\\react-mesto-api-full\\frontend\\src\\components\\ImagePopup.js",[],"C:\\Users\\Huawei\\Рабочий стол\\YP\\react-mesto-api-full\\frontend\\src\\components\\ConfirmationPopup.js",[],["102","103"],"C:\\Users\\Huawei\\Рабочий стол\\YP\\react-mesto-api-full\\frontend\\src\\components\\PopupWithForm.js",[],"C:\\Users\\Huawei\\Рабочий стол\\YP\\react-mesto-api-full\\frontend\\src\\reportWebVitals.js",[],["104","105"],"C:\\Users\\Huawei\\Рабочий стол\\YP\\react-mesto-api-full\\frontend\\src\\components\\Register.js",[],"C:\\Users\\Huawei\\Рабочий стол\\YP\\react-mesto-api-full\\frontend\\src\\components\\InfoTooltip.js",[],"C:\\Users\\Huawei\\Рабочий стол\\YP\\react-mesto-api-full\\frontend\\src\\utils\\auth.js",[],"C:\\Users\\Huawei\\Рабочий стол\\YP\\react-mesto-api-full\\frontend\\src\\contexts\\CurrentUserContext.js",[],{"ruleId":"106","replacedBy":"107"},{"ruleId":"108","replacedBy":"109"},{"ruleId":"110","severity":1,"message":"111","line":209,"column":6,"nodeType":"112","endLine":209,"endColumn":16,"suggestions":"113"},{"ruleId":"110","severity":1,"message":"114","line":213,"column":6,"nodeType":"112","endLine":213,"endColumn":8,"suggestions":"115"},{"ruleId":"106","replacedBy":"116"},{"ruleId":"108","replacedBy":"117"},{"ruleId":"106","replacedBy":"118"},{"ruleId":"108","replacedBy":"119"},{"ruleId":"106","replacedBy":"120"},{"ruleId":"108","replacedBy":"121"},{"ruleId":"106","replacedBy":"122"},{"ruleId":"108","replacedBy":"123"},{"ruleId":"106","replacedBy":"124"},{"ruleId":"108","replacedBy":"125"},{"ruleId":"106","replacedBy":"126"},{"ruleId":"108","replacedBy":"127"},"no-native-reassign",["128"],"no-negated-in-lhs",["129"],"react-hooks/exhaustive-deps","React Hook React.useEffect has a missing dependency: 'api'. Either include it or remove the dependency array.","ArrayExpression",["130"],"React Hook React.useEffect has a missing dependency: 'tokenCheck'. Either include it or remove the dependency array.",["131"],["128"],["129"],["128"],["129"],["128"],["129"],["128"],["129"],["128"],["129"],["128"],["129"],"no-global-assign","no-unsafe-negation",{"desc":"132","fix":"133"},{"desc":"134","fix":"135"},"Update the dependencies array to be: [api, loggedIn]",{"range":"136","text":"137"},"Update the dependencies array to be: [tokenCheck]",{"range":"138","text":"139"},[5394,5404],"[api, loggedIn]",[5456,5458],"[tokenCheck]"]