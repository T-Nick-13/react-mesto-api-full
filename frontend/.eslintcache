[{"C:\\Users\\Huawei\\Рабочий стол\\YP\\react-mesto-auth\\src\\components\\App.js":"1","C:\\Users\\Huawei\\Рабочий стол\\YP\\react-mesto-auth\\src\\contexts\\CurrentUserContext.js":"2","C:\\Users\\Huawei\\Рабочий стол\\YP\\react-mesto-auth\\src\\components\\PopupWithForm.js":"3","C:\\Users\\Huawei\\Рабочий стол\\YP\\react-mesto-auth\\src\\index.js":"4","C:\\Users\\Huawei\\Рабочий стол\\YP\\react-mesto-auth\\src\\components\\Card.js":"5","C:\\Users\\Huawei\\Рабочий стол\\YP\\react-mesto-auth\\src\\components\\Main.js":"6","C:\\Users\\Huawei\\Рабочий стол\\YP\\react-mesto-auth\\src\\components\\Footer.js":"7","C:\\Users\\Huawei\\Рабочий стол\\YP\\react-mesto-auth\\src\\components\\Login.js":"8","C:\\Users\\Huawei\\Рабочий стол\\YP\\react-mesto-auth\\src\\components\\EditAvatarPopup.js":"9","C:\\Users\\Huawei\\Рабочий стол\\YP\\react-mesto-auth\\src\\components\\ImagePopup.js":"10","C:\\Users\\Huawei\\Рабочий стол\\YP\\react-mesto-auth\\src\\components\\Header.js":"11","C:\\Users\\Huawei\\Рабочий стол\\YP\\react-mesto-auth\\src\\utils\\auth.js":"12","C:\\Users\\Huawei\\Рабочий стол\\YP\\react-mesto-auth\\src\\reportWebVitals.js":"13","C:\\Users\\Huawei\\Рабочий стол\\YP\\react-mesto-auth\\src\\components\\ProtectedRoute.js":"14","C:\\Users\\Huawei\\Рабочий стол\\YP\\react-mesto-auth\\src\\components\\ConfirmationPopup.js":"15","C:\\Users\\Huawei\\Рабочий стол\\YP\\react-mesto-auth\\src\\components\\AddPlacePopup.js":"16","C:\\Users\\Huawei\\Рабочий стол\\YP\\react-mesto-auth\\src\\components\\EditProfilePopup.js":"17","C:\\Users\\Huawei\\Рабочий стол\\YP\\react-mesto-auth\\src\\components\\Register.js":"18","C:\\Users\\Huawei\\Рабочий стол\\YP\\react-mesto-auth\\src\\components\\InfoTooltip.js":"19","C:\\Users\\Huawei\\Рабочий стол\\YP\\react-mesto-api-full\\frontend\\src\\index.js":"20","C:\\Users\\Huawei\\Рабочий стол\\YP\\react-mesto-api-full\\frontend\\src\\components\\Login.js":"21","C:\\Users\\Huawei\\Рабочий стол\\YP\\react-mesto-api-full\\frontend\\src\\components\\ConfirmationPopup.js":"22","C:\\Users\\Huawei\\Рабочий стол\\YP\\react-mesto-api-full\\frontend\\src\\components\\PopupWithForm.js":"23","C:\\Users\\Huawei\\Рабочий стол\\YP\\react-mesto-api-full\\frontend\\src\\components\\EditAvatarPopup.js":"24","C:\\Users\\Huawei\\Рабочий стол\\YP\\react-mesto-api-full\\frontend\\src\\components\\EditProfilePopup.js":"25","C:\\Users\\Huawei\\Рабочий стол\\YP\\react-mesto-api-full\\frontend\\src\\components\\Main.js":"26","C:\\Users\\Huawei\\Рабочий стол\\YP\\react-mesto-api-full\\frontend\\src\\components\\AddPlacePopup.js":"27","C:\\Users\\Huawei\\Рабочий стол\\YP\\react-mesto-api-full\\frontend\\src\\components\\Card.js":"28","C:\\Users\\Huawei\\Рабочий стол\\YP\\react-mesto-api-full\\frontend\\src\\utils\\Api.js":"29","C:\\Users\\Huawei\\Рабочий стол\\YP\\react-mesto-api-full\\frontend\\src\\components\\ImagePopup.js":"30","C:\\Users\\Huawei\\Рабочий стол\\YP\\react-mesto-api-full\\frontend\\src\\reportWebVitals.js":"31","C:\\Users\\Huawei\\Рабочий стол\\YP\\react-mesto-api-full\\frontend\\src\\components\\Register.js":"32","C:\\Users\\Huawei\\Рабочий стол\\YP\\react-mesto-api-full\\frontend\\src\\components\\Header.js":"33","C:\\Users\\Huawei\\Рабочий стол\\YP\\react-mesto-api-full\\frontend\\src\\contexts\\CurrentUserContext.js":"34","C:\\Users\\Huawei\\Рабочий стол\\YP\\react-mesto-api-full\\frontend\\src\\components\\Footer.js":"35","C:\\Users\\Huawei\\Рабочий стол\\YP\\react-mesto-api-full\\frontend\\src\\components\\ProtectedRoute.js":"36","C:\\Users\\Huawei\\Рабочий стол\\YP\\react-mesto-api-full\\frontend\\src\\components\\InfoTooltip.js":"37","C:\\Users\\Huawei\\Рабочий стол\\YP\\react-mesto-api-full\\frontend\\src\\utils\\auth.js":"38","C:\\Users\\Huawei\\Рабочий стол\\YP\\react-mesto-api-full\\frontend\\src\\components\\App.js":"39"},{"size":7547,"mtime":1613233337273,"results":"40","hashOfConfig":"41"},{"size":84,"mtime":1607867232017,"results":"42","hashOfConfig":"41"},{"size":731,"mtime":1607968603892,"results":"43","hashOfConfig":"41"},{"size":608,"mtime":1612691478264,"results":"44","hashOfConfig":"41"},{"size":1576,"mtime":1607966480432,"results":"45","hashOfConfig":"41"},{"size":1818,"mtime":1613311697544,"results":"46","hashOfConfig":"41"},{"size":188,"mtime":1606659562577,"results":"47","hashOfConfig":"41"},{"size":1172,"mtime":1613203131402,"results":"48","hashOfConfig":"41"},{"size":872,"mtime":1608227878719,"results":"49","hashOfConfig":"41"},{"size":495,"mtime":1613231457764,"results":"50","hashOfConfig":"41"},{"size":495,"mtime":1613198564466,"results":"51","hashOfConfig":"41"},{"size":1025,"mtime":1613197149143,"results":"52","hashOfConfig":"41"},{"size":362,"mtime":499162500000,"results":"53","hashOfConfig":"41"},{"size":305,"mtime":1613071521508,"results":"54","hashOfConfig":"41"},{"size":279,"mtime":1608228172468,"results":"55","hashOfConfig":"41"},{"size":1499,"mtime":1613234329767,"results":"56","hashOfConfig":"41"},{"size":1896,"mtime":1608141300737,"results":"57","hashOfConfig":"41"},{"size":1420,"mtime":1613203123565,"results":"58","hashOfConfig":"41"},{"size":787,"mtime":1613202472995,"results":"59","hashOfConfig":"41"},{"size":608,"mtime":1612691478264,"results":"60","hashOfConfig":"61"},{"size":1171,"mtime":1614453813751,"results":"62","hashOfConfig":"61"},{"size":279,"mtime":1608228172468,"results":"63","hashOfConfig":"61"},{"size":731,"mtime":1607968603892,"results":"64","hashOfConfig":"61"},{"size":872,"mtime":1608227878719,"results":"65","hashOfConfig":"61"},{"size":1867,"mtime":1614508222778,"results":"66","hashOfConfig":"61"},{"size":1817,"mtime":1614453833239,"results":"67","hashOfConfig":"61"},{"size":1499,"mtime":1613234329767,"results":"68","hashOfConfig":"61"},{"size":1573,"mtime":1614520547064,"results":"69","hashOfConfig":"61"},{"size":2264,"mtime":1614455011813,"results":"70","hashOfConfig":"61"},{"size":495,"mtime":1613231457764,"results":"71","hashOfConfig":"61"},{"size":362,"mtime":499162500000,"results":"72","hashOfConfig":"61"},{"size":1418,"mtime":1614453869418,"results":"73","hashOfConfig":"61"},{"size":495,"mtime":1613198564466,"results":"74","hashOfConfig":"61"},{"size":84,"mtime":1607867232017,"results":"75","hashOfConfig":"61"},{"size":188,"mtime":1606659562577,"results":"76","hashOfConfig":"61"},{"size":304,"mtime":1614453847396,"results":"77","hashOfConfig":"61"},{"size":787,"mtime":1613202472995,"results":"78","hashOfConfig":"61"},{"size":1043,"mtime":1614520753111,"results":"79","hashOfConfig":"61"},{"size":7845,"mtime":1614507315611,"results":"80","hashOfConfig":"61"},{"filePath":"81","messages":"82","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"83"},"15uvnvn",{"filePath":"84","messages":"85","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"86"},{"filePath":"87","messages":"88","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"89","messages":"90","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"91"},{"filePath":"92","messages":"93","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"94"},{"filePath":"95","messages":"96","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"97","messages":"98","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"99","messages":"100","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"91"},{"filePath":"101","messages":"102","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"103"},{"filePath":"104","messages":"105","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"106","messages":"107","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"108","messages":"109","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"86"},{"filePath":"110","messages":"111","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"112","messages":"113","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"86"},{"filePath":"114","messages":"115","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"91"},{"filePath":"116","messages":"117","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"91"},{"filePath":"118","messages":"119","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"86"},{"filePath":"120","messages":"121","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"122"},{"filePath":"123","messages":"124","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"125","messages":"126","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"127"},"zo5811",{"filePath":"128","messages":"129","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"130"},{"filePath":"131","messages":"132","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"130"},{"filePath":"133","messages":"134","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"135"},{"filePath":"136","messages":"137","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"138"},{"filePath":"139","messages":"140","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"141","messages":"142","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"143","messages":"144","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"127"},{"filePath":"145","messages":"146","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"147","messages":"148","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"149"},{"filePath":"150","messages":"151","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"152","messages":"153","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"154"},{"filePath":"155","messages":"156","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"138"},{"filePath":"157","messages":"158","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"159","messages":"160","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"130"},{"filePath":"161","messages":"162","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"130"},{"filePath":"163","messages":"164","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"138"},{"filePath":"165","messages":"166","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"127"},{"filePath":"167","messages":"168","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"169","messages":"170","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"171","usedDeprecatedRules":"130"},"C:\\Users\\Huawei\\Рабочий стол\\YP\\react-mesto-auth\\src\\components\\App.js",["172","173"],"import React from 'react';\nimport { Route, Switch, Redirect, useHistory } from 'react-router-dom';\nimport Main from './Main.js';\nimport ImagePopup from './ImagePopup.js';\nimport api from '../utils/api.js';\nimport EditProfilePopup from './EditProfilePopup.js';\nimport EditAvatarPopup from './EditAvatarPopup.js';\nimport AddPlacePopup from './AddPlacePopup.js';\nimport ConfirmationPopup from './ConfirmationPopup.js';\nimport Login from './Login.js';\nimport Register from './Register.js';\nimport ProtectedRoute from './ProtectedRoute.js';\nimport InfoTooltip from './InfoTooltip.js';\nimport * as auth from '../utils/auth.js';\nimport Footer from './Footer.js';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext.js';\n\nfunction App() {\n\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = React.useState(false);\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = React.useState(false);\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = React.useState(false);\n  const [isInfoTooltipPopupOpen, setIsInfoTooltipPopupOpen] = React.useState(false);\n  const [cards, setCards] = React.useState([]);\n  const [selectedCard, setSelectedCard] = React.useState({});\n  const [currentUser, setCurrentUser] = React.useState('');\n  const [loading, setLoading] = React.useState('Сохранить');\n  const [loadingPlace, setLoadingPlace] = React.useState('Создать');\n\n  const [loggedIn, setLoggedIn] = React.useState(false);\n  const [email, setEmail] = React.useState('');\n  const [registered, setRegistered] = React.useState(false);\n\n  const history = useHistory();\n\n  React.useEffect(() => {\n    tokenCheck();\n  }, []);\n\n  React.useEffect(() => {\n    if (loggedIn) {\n      history.push('/');\n    }\n  }, [loggedIn])\n\n\n  React.useEffect(() => {\n    Promise.all([\n      api.getUserData(),\n      api.getInitialCards()\n    ])\n    .then(([userInfo, initialCards]) => {\n      setCurrentUser(userInfo);\n      setCards(initialCards)\n    })\n    .catch((err) => {\n      console.log(err);\n    })\n  }, [])\n\n\n  React.useEffect(() => {\n    const ESC = 'Escape';\n    function handleEscClose(evt) {\n      if (evt.key === ESC) {\n        closeAllPopups();\n      }\n    }\n    document.addEventListener('keyup', handleEscClose);\n    return () => document.removeEventListener('keyup', handleEscClose)\n  }, [])\n\n\n  function handleEditProfileClick() {\n    setIsEditProfilePopupOpen(true);\n    setLoading('Сохранить')\n  }\n\n  function handleEditAvatarClick() {\n    setIsEditAvatarPopupOpen(true);\n    setLoading('Сохранить')\n  }\n\n  function handleAddPlaceClick() {\n    setIsAddPlacePopupOpen(true);\n    setLoadingPlace('Создать')\n  }\n\n  function closeAllPopups() {\n    setIsEditProfilePopupOpen(false);\n    setIsEditAvatarPopupOpen(false);\n    setIsAddPlacePopupOpen(false);\n    setIsInfoTooltipPopupOpen(false);\n    setSelectedCard({})\n  }\n\n  function handleCardClick(card) {\n    setSelectedCard({\n      link: card.link,\n      name: card.name\n    })\n  }\n\n  function handleCardLike(card) {\n    const isLiked = card.likes.some(i => i._id === currentUser._id);\n\n    api.changeLikeCardStatus(card._id, !isLiked)\n      .then((newCard) => {\n        const newCards = cards.map((c) => c._id === card._id ? newCard : c);\n        setCards(newCards);\n    })\n      .catch((err) => {\n      console.log(err)\n      })\n\n  }\n\n  function handleCardDelete(card) {\n    api.deleteCard(card._id)\n      .then(()=>{\n        const newCards = cards.filter((c) => c._id !== card._id);\n        setCards(newCards);\n      })\n      .catch((err) => {\n        console.log(err)\n        })\n  }\n\n  function handleUpdateUser(userInfo) {\n    setLoading('Сохранение...');\n    api.saveUserData(userInfo)\n      .then((inputValues)=> {\n        setCurrentUser(inputValues);\n        closeAllPopups()\n      })\n      .catch((err) => {\n        console.log(err)\n        })\n  }\n\n  function handleUpdateAvatar(data) {\n    setLoading('Сохранение...');\n    api.saveAvatar(data)\n      .then((avatar)=> {\n        setCurrentUser(avatar);\n        closeAllPopups()\n      })\n      .catch((err) => {\n        console.log(err)\n        })\n  }\n\n  function handleAddPlaceSubmit(data) {\n    setLoadingPlace('Сохранение...')\n    api.saveNewCard(data)\n      .then((newCard)=> {\n        setCards([newCard, ...cards]);\n        closeAllPopups()\n      })\n      .catch((err) => {\n        console.log(err)\n        })\n  }\n\n  function handleLogin(data) {\n    const {email, password} = data;\n    auth.authorize(email, password)\n      .then((res) => {\n        if (res) {\n          setLoggedIn(true);\n          localStorage.setItem('token', res.token);\n          setEmail(email);\n          history.push(\"/\");\n        }\n      })\n      .catch((err) => {console.log(err)})\n  }\n\n  function handleRegister(data) {\n    const {email, password} = data;\n    auth.register(email, password)\n      .then((res) => {\n        if (res) {\n          setIsInfoTooltipPopupOpen(true);\n          setRegistered(true);\n          history.push('/sign-in');\n        }\n      })\n      .catch((err) => {\n        console.log(err);\n        setIsInfoTooltipPopupOpen(true);\n        setRegistered(false);\n      })\n  }\n\n  function tokenCheck() {\n    const token = localStorage.getItem('token');\n    if (token) {\n      auth.getContent(token)\n        .then((res) => {\n          if (res) {\n            setLoggedIn(true);\n            history.push(\"/\");\n            setEmail(res.data.email);\n          }\n        })\n        .catch((err) => {\n          console.log(err);\n        });\n    }\n\n  }\n\n\n  function handleSignOut() {\n    setLoggedIn(false);\n    localStorage.removeItem('token');\n    history.push('/sign-in')\n  }\n\n\n  return (\n    <div className=\"page\">\n      <CurrentUserContext.Provider value={currentUser}>\n\n      <Switch>\n      <Route path=\"/sign-in\">\n          <Login handleLogin={handleLogin} />\n        </Route>\n        <Route path=\"/sign-up\">\n          <Register onRegister={handleRegister} />\n        </Route>\n        <ProtectedRoute\n          path=\"/\"\n          loggedIn={loggedIn}\n          component={Main}\n          onEditProfile={handleEditProfileClick}\n          onEditAvatar={handleEditAvatarClick}\n          onAddPlace={handleAddPlaceClick}\n          userAvatar={currentUser.avatar}\n          name={currentUser.name}\n          about={currentUser.about}\n          handleSignOut={handleSignOut}\n          email={email}\n          cards={cards}\n          handleCardClick={handleCardClick}\n          handleCardLike={handleCardLike}\n          handleCardDelete={handleCardDelete}\n        />\n       <Route>\n          {loggedIn ? <Redirect to=\"/\" /> : <Redirect to=\"/sign-in\" />}\n       </Route>\n      </Switch>\n\n      <Footer />\n\n      <InfoTooltip\n        isOpen={isInfoTooltipPopupOpen}\n        onClose={closeAllPopups}\n        registered={registered} />\n\n        <EditProfilePopup\n          isOpen={isEditProfilePopupOpen}\n          onClose={closeAllPopups}\n          onUpdateUser={handleUpdateUser}\n          btnValue={loading} />\n\n        <AddPlacePopup\n          isOpen={isAddPlacePopupOpen}\n          onClose={closeAllPopups}\n          onAddPlace={handleAddPlaceSubmit}\n          btnValue={loadingPlace} />\n\n        <ImagePopup\n          card={selectedCard}\n          onClose={closeAllPopups} />\n\n        <ConfirmationPopup />\n\n        <EditAvatarPopup\n          isOpen={isEditAvatarPopupOpen}\n          onClose={closeAllPopups}\n          onUpdateAvatar={handleUpdateAvatar}\n          btnValue={loading} />\n\n      </CurrentUserContext.Provider>\n    </div>\n\n  );\n}\n\nexport default App;\n","C:\\Users\\Huawei\\Рабочий стол\\YP\\react-mesto-auth\\src\\contexts\\CurrentUserContext.js",[],["174","175"],"C:\\Users\\Huawei\\Рабочий стол\\YP\\react-mesto-auth\\src\\components\\PopupWithForm.js",[],"C:\\Users\\Huawei\\Рабочий стол\\YP\\react-mesto-auth\\src\\index.js",[],["176","177"],"C:\\Users\\Huawei\\Рабочий стол\\YP\\react-mesto-auth\\src\\components\\Card.js",[],["178","179"],"C:\\Users\\Huawei\\Рабочий стол\\YP\\react-mesto-auth\\src\\components\\Main.js",[],"C:\\Users\\Huawei\\Рабочий стол\\YP\\react-mesto-auth\\src\\components\\Footer.js",[],"C:\\Users\\Huawei\\Рабочий стол\\YP\\react-mesto-auth\\src\\components\\Login.js",[],"C:\\Users\\Huawei\\Рабочий стол\\YP\\react-mesto-auth\\src\\components\\EditAvatarPopup.js",[],["180","181"],"C:\\Users\\Huawei\\Рабочий стол\\YP\\react-mesto-auth\\src\\components\\ImagePopup.js",[],"C:\\Users\\Huawei\\Рабочий стол\\YP\\react-mesto-auth\\src\\components\\Header.js",[],"C:\\Users\\Huawei\\Рабочий стол\\YP\\react-mesto-auth\\src\\utils\\auth.js",[],"C:\\Users\\Huawei\\Рабочий стол\\YP\\react-mesto-auth\\src\\reportWebVitals.js",[],"C:\\Users\\Huawei\\Рабочий стол\\YP\\react-mesto-auth\\src\\components\\ProtectedRoute.js",[],"C:\\Users\\Huawei\\Рабочий стол\\YP\\react-mesto-auth\\src\\components\\ConfirmationPopup.js",[],"C:\\Users\\Huawei\\Рабочий стол\\YP\\react-mesto-auth\\src\\components\\AddPlacePopup.js",[],"C:\\Users\\Huawei\\Рабочий стол\\YP\\react-mesto-auth\\src\\components\\EditProfilePopup.js",[],"C:\\Users\\Huawei\\Рабочий стол\\YP\\react-mesto-auth\\src\\components\\Register.js",[],["182","183"],"C:\\Users\\Huawei\\Рабочий стол\\YP\\react-mesto-auth\\src\\components\\InfoTooltip.js",[],"C:\\Users\\Huawei\\Рабочий стол\\YP\\react-mesto-api-full\\frontend\\src\\index.js",[],["184","185"],"C:\\Users\\Huawei\\Рабочий стол\\YP\\react-mesto-api-full\\frontend\\src\\components\\Login.js",[],["186","187"],"C:\\Users\\Huawei\\Рабочий стол\\YP\\react-mesto-api-full\\frontend\\src\\components\\ConfirmationPopup.js",[],"C:\\Users\\Huawei\\Рабочий стол\\YP\\react-mesto-api-full\\frontend\\src\\components\\PopupWithForm.js",[],["188","189"],"C:\\Users\\Huawei\\Рабочий стол\\YP\\react-mesto-api-full\\frontend\\src\\components\\EditAvatarPopup.js",[],["190","191"],"C:\\Users\\Huawei\\Рабочий стол\\YP\\react-mesto-api-full\\frontend\\src\\components\\EditProfilePopup.js",[],"C:\\Users\\Huawei\\Рабочий стол\\YP\\react-mesto-api-full\\frontend\\src\\components\\Main.js",[],"C:\\Users\\Huawei\\Рабочий стол\\YP\\react-mesto-api-full\\frontend\\src\\components\\AddPlacePopup.js",[],"C:\\Users\\Huawei\\Рабочий стол\\YP\\react-mesto-api-full\\frontend\\src\\components\\Card.js",[],"C:\\Users\\Huawei\\Рабочий стол\\YP\\react-mesto-api-full\\frontend\\src\\utils\\Api.js",[],["192","193"],"C:\\Users\\Huawei\\Рабочий стол\\YP\\react-mesto-api-full\\frontend\\src\\components\\ImagePopup.js",[],"C:\\Users\\Huawei\\Рабочий стол\\YP\\react-mesto-api-full\\frontend\\src\\reportWebVitals.js",[],["194","195"],"C:\\Users\\Huawei\\Рабочий стол\\YP\\react-mesto-api-full\\frontend\\src\\components\\Register.js",[],"C:\\Users\\Huawei\\Рабочий стол\\YP\\react-mesto-api-full\\frontend\\src\\components\\Header.js",[],"C:\\Users\\Huawei\\Рабочий стол\\YP\\react-mesto-api-full\\frontend\\src\\contexts\\CurrentUserContext.js",[],"C:\\Users\\Huawei\\Рабочий стол\\YP\\react-mesto-api-full\\frontend\\src\\components\\Footer.js",[],"C:\\Users\\Huawei\\Рабочий стол\\YP\\react-mesto-api-full\\frontend\\src\\components\\ProtectedRoute.js",[],"C:\\Users\\Huawei\\Рабочий стол\\YP\\react-mesto-api-full\\frontend\\src\\components\\InfoTooltip.js",[],"C:\\Users\\Huawei\\Рабочий стол\\YP\\react-mesto-api-full\\frontend\\src\\utils\\auth.js",[],"C:\\Users\\Huawei\\Рабочий стол\\YP\\react-mesto-api-full\\frontend\\src\\components\\App.js",["196","197"],"import React from 'react';\nimport { Route, Switch, Redirect, useHistory } from 'react-router-dom';\nimport Main from './Main.js';\nimport ImagePopup from './ImagePopup.js';\nimport Api from '../utils/Api.js';\nimport EditProfilePopup from './EditProfilePopup.js';\nimport EditAvatarPopup from './EditAvatarPopup.js';\nimport AddPlacePopup from './AddPlacePopup.js';\nimport ConfirmationPopup from './ConfirmationPopup.js';\nimport Login from './Login.js';\nimport Register from './Register.js';\nimport ProtectedRoute from './ProtectedRoute.js';\nimport InfoTooltip from './InfoTooltip.js';\nimport * as auth from '../utils/auth.js';\nimport Footer from './Footer.js';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext.js';\n//import defaultAvatar from '../images/kusto.jpg';\n\n\nfunction App() {\n\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = React.useState(false);\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = React.useState(false);\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = React.useState(false);\n  const [isInfoTooltipPopupOpen, setIsInfoTooltipPopupOpen] = React.useState(false);\n  const [cards, setCards] = React.useState([]);\n  const [selectedCard, setSelectedCard] = React.useState({});\n  const [currentUser, setCurrentUser] = React.useState({ });\n  const [loading, setLoading] = React.useState('Сохранить');\n  const [loadingPlace, setLoadingPlace] = React.useState('Создать');\n\n  const [loggedIn, setLoggedIn] = React.useState(false);\n  const [email, setEmail] = React.useState('');\n  const [registered, setRegistered] = React.useState(false);\n\n  const history = useHistory();\n  const token = localStorage.getItem('token');\n\n  const api = new Api({\n    baseUrl: auth.BASE_URL,\n    headers: {\n      'Content-Type': 'application/json',\n      Authorization: `Bearer ${token}`,\n    },\n  });\n\n/*\n\n  React.useEffect(() => {\n    if (loggedIn) {\n      history.push('/');\n    }\n  }, [loggedIn]) */\n\n\n\n\n\n  function handleEditProfileClick() {\n    setIsEditProfilePopupOpen(true);\n    setLoading('Сохранить')\n  }\n\n  function handleEditAvatarClick() {\n    setIsEditAvatarPopupOpen(true);\n    setLoading('Сохранить')\n  }\n\n  function handleAddPlaceClick() {\n    setIsAddPlacePopupOpen(true);\n    setLoadingPlace('Создать')\n  }\n\n  function closeAllPopups() {\n    setIsEditProfilePopupOpen(false);\n    setIsEditAvatarPopupOpen(false);\n    setIsAddPlacePopupOpen(false);\n    setIsInfoTooltipPopupOpen(false);\n    setSelectedCard({})\n  }\n\n  function handleCardClick(card) {\n    setSelectedCard({\n      link: card.link,\n      name: card.name\n    })\n  }\n\n  function handleCardLike(card) {\n    const isLiked = card.likes.some(i => i._id === currentUser._id);\n\n    api.changeLikeCardStatus(card._id, !isLiked)\n      .then((newCard) => {\n        const newCards = cards.map((c) => c._id === card._id ? newCard : c);\n        setCards(newCards);\n    })\n      .catch((err) => {\n      console.log(err)\n      })\n\n  }\n\n  function handleCardDelete(card) {\n    api.deleteCard(card._id)\n      .then(()=>{\n        const newCards = cards.filter((c) => c._id !== card._id);\n        setCards(newCards);\n      })\n      .catch((err) => {\n        console.log(err)\n        })\n  }\n\n  function handleUpdateUser(userInfo) {\n    setLoading('Сохранение...');\n    api.saveUserData(userInfo)\n      .then((inputValues)=> {\n        setCurrentUser(inputValues);\n        closeAllPopups()\n      })\n      .catch((err) => {\n        console.log(err)\n        })\n  }\n\n  function handleUpdateAvatar(data) {\n    setLoading('Сохранение...');\n    api.saveAvatar(data)\n      .then((avatar)=> {\n        setCurrentUser(avatar);\n        closeAllPopups()\n      })\n      .catch((err) => {\n        console.log(err)\n        })\n  }\n\n  function handleAddPlaceSubmit(data) {\n    setLoadingPlace('Сохранение...')\n    api.saveNewCard(data)\n      .then((newCard)=> {\n        setCards([newCard, ...cards]);\n        closeAllPopups()\n      })\n      .catch((err) => {\n        console.log(err)\n        })\n  }\n\n  function handleLogin(data) {\n    const {email, password} = data;\n    auth.authorize(email, password)\n      .then((res) => {\n        if (res) {\n          setLoggedIn(true);\n          localStorage.setItem('token', res.token);\n          setEmail(email);\n          history.push(\"/\");\n        }\n      })\n      .catch((err) => {console.log(err)})\n  }\n\n  function handleRegister(data) {\n    const {email, password} = data;\n    auth.register(email, password)\n      .then((res) => {\n        if (res) {\n          setIsInfoTooltipPopupOpen(true);\n          setRegistered(true);\n          history.push('/signin');\n        }\n      })\n      .catch((err) => {\n        console.log(err);\n        setIsInfoTooltipPopupOpen(true);\n        setRegistered(false);\n      })\n  }\n\n  function tokenCheck() {\n    const token = localStorage.getItem('token');\n    if (token) {\n      auth.getContent(token)\n        .then((res) => {\n          if (res) {\n            setLoggedIn(true);\n            history.push(\"/\");\n            setEmail(res.email);\n          }\n        })\n        .catch((err) => {\n          console.log(err);\n        });\n    }\n\n  }\n\n\n\n  React.useEffect(() => {\n    if (loggedIn) {\n    Promise.all([\n      api.getUserData(),\n      api.getInitialCards()\n    ])\n    .then(([userInfo, initialCards]) => {\n      setCurrentUser(userInfo);\n      setCards(initialCards)\n    })\n    .catch((err) => {\n      console.log(err);\n    })\n    }\n  }, [loggedIn])\n\n  React.useEffect(() => {\n    tokenCheck();\n  }, []);\n\n\n  React.useEffect(() => {\n    const ESC = 'Escape';\n    function handleEscClose(evt) {\n      if (evt.key === ESC) {\n        closeAllPopups();\n      }\n    }\n    document.addEventListener('keyup', handleEscClose);\n    return () => document.removeEventListener('keyup', handleEscClose)\n  }, [])\n\n\n  function handleSignOut() {\n    setLoggedIn(false);\n    localStorage.removeItem('token');\n    history.push('/signin')\n  }\n\n\n  return (\n    <div className=\"page\">\n      <CurrentUserContext.Provider value={currentUser}>\n\n      <Switch>\n      <Route path=\"/signin\">\n          <Login handleLogin={handleLogin} />\n        </Route>\n        <Route path=\"/signup\">\n          <Register onRegister={handleRegister} />\n        </Route>\n        <ProtectedRoute\n          path=\"/\"\n          loggedIn={loggedIn}\n          component={Main}\n          onEditProfile={handleEditProfileClick}\n          onEditAvatar={handleEditAvatarClick}\n          onAddPlace={handleAddPlaceClick}\n          userAvatar={currentUser.avatar}\n          name={currentUser.name}\n          about={currentUser.about}\n          handleSignOut={handleSignOut}\n          email={email}\n          cards={cards}\n          handleCardClick={handleCardClick}\n          handleCardLike={handleCardLike}\n          handleCardDelete={handleCardDelete}\n        />\n       <Route>\n          {loggedIn ? <Redirect to=\"/\" /> : <Redirect to=\"/signin\" />}\n       </Route>\n      </Switch>\n\n      <Footer />\n\n      <InfoTooltip\n        isOpen={isInfoTooltipPopupOpen}\n        onClose={closeAllPopups}\n        registered={registered} />\n\n        <EditProfilePopup\n          isOpen={isEditProfilePopupOpen}\n          onClose={closeAllPopups}\n          onUpdateUser={handleUpdateUser}\n          btnValue={loading} />\n\n        <AddPlacePopup\n          isOpen={isAddPlacePopupOpen}\n          onClose={closeAllPopups}\n          onAddPlace={handleAddPlaceSubmit}\n          btnValue={loadingPlace} />\n\n        <ImagePopup\n          card={selectedCard}\n          onClose={closeAllPopups} />\n\n        <ConfirmationPopup />\n\n        <EditAvatarPopup\n          isOpen={isEditAvatarPopupOpen}\n          onClose={closeAllPopups}\n          onUpdateAvatar={handleUpdateAvatar}\n          btnValue={loading} />\n\n      </CurrentUserContext.Provider>\n    </div>\n\n  );\n}\n\nexport default App;\n",{"ruleId":"198","severity":1,"message":"199","line":38,"column":6,"nodeType":"200","endLine":38,"endColumn":8,"suggestions":"201"},{"ruleId":"198","severity":1,"message":"202","line":44,"column":6,"nodeType":"200","endLine":44,"endColumn":16,"suggestions":"203"},{"ruleId":"204","replacedBy":"205"},{"ruleId":"206","replacedBy":"207"},{"ruleId":"204","replacedBy":"208"},{"ruleId":"206","replacedBy":"209"},{"ruleId":"204","replacedBy":"210"},{"ruleId":"206","replacedBy":"211"},{"ruleId":"204","replacedBy":"212"},{"ruleId":"206","replacedBy":"213"},{"ruleId":"204","replacedBy":"214"},{"ruleId":"206","replacedBy":"215"},{"ruleId":"204","replacedBy":"216"},{"ruleId":"206","replacedBy":"217"},{"ruleId":"204","replacedBy":"218"},{"ruleId":"206","replacedBy":"219"},{"ruleId":"204","replacedBy":"220"},{"ruleId":"206","replacedBy":"221"},{"ruleId":"204","replacedBy":"222"},{"ruleId":"206","replacedBy":"223"},{"ruleId":"204","replacedBy":"224"},{"ruleId":"206","replacedBy":"225"},{"ruleId":"204","replacedBy":"226"},{"ruleId":"206","replacedBy":"227"},{"ruleId":"198","severity":1,"message":"228","line":215,"column":6,"nodeType":"200","endLine":215,"endColumn":16,"suggestions":"229"},{"ruleId":"198","severity":1,"message":"199","line":219,"column":6,"nodeType":"200","endLine":219,"endColumn":8,"suggestions":"230"},"react-hooks/exhaustive-deps","React Hook React.useEffect has a missing dependency: 'tokenCheck'. Either include it or remove the dependency array.","ArrayExpression",["231"],"React Hook React.useEffect has a missing dependency: 'history'. Either include it or remove the dependency array.",["232"],"no-native-reassign",["233"],"no-negated-in-lhs",["234"],["233"],["234"],["233"],["234"],["233"],["234"],["233"],["234"],["233"],["234"],["233"],["234"],["233"],["234"],["233"],["234"],["233"],["234"],["233"],["234"],"React Hook React.useEffect has a missing dependency: 'api'. Either include it or remove the dependency array.",["235"],["236"],{"desc":"237","fix":"238"},{"desc":"239","fix":"240"},"no-global-assign","no-unsafe-negation",{"desc":"241","fix":"242"},{"desc":"237","fix":"243"},"Update the dependencies array to be: [tokenCheck]",{"range":"244","text":"245"},"Update the dependencies array to be: [history, loggedIn]",{"range":"246","text":"247"},"Update the dependencies array to be: [api, loggedIn]",{"range":"248","text":"249"},{"range":"250","text":"245"},[1629,1631],"[tokenCheck]",[1717,1727],"[history, loggedIn]",[5404,5414],"[api, loggedIn]",[5466,5468]]