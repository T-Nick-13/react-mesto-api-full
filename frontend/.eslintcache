[{"C:\\Users\\Huawei\\Рабочий стол\\YP\\react-mesto-auth\\src\\components\\App.js":"1","C:\\Users\\Huawei\\Рабочий стол\\YP\\react-mesto-auth\\src\\contexts\\CurrentUserContext.js":"2","C:\\Users\\Huawei\\Рабочий стол\\YP\\react-mesto-auth\\src\\components\\PopupWithForm.js":"3","C:\\Users\\Huawei\\Рабочий стол\\YP\\react-mesto-auth\\src\\index.js":"4","C:\\Users\\Huawei\\Рабочий стол\\YP\\react-mesto-auth\\src\\components\\Card.js":"5","C:\\Users\\Huawei\\Рабочий стол\\YP\\react-mesto-auth\\src\\components\\Main.js":"6","C:\\Users\\Huawei\\Рабочий стол\\YP\\react-mesto-auth\\src\\components\\Footer.js":"7","C:\\Users\\Huawei\\Рабочий стол\\YP\\react-mesto-auth\\src\\components\\Login.js":"8","C:\\Users\\Huawei\\Рабочий стол\\YP\\react-mesto-auth\\src\\components\\EditAvatarPopup.js":"9","C:\\Users\\Huawei\\Рабочий стол\\YP\\react-mesto-auth\\src\\components\\ImagePopup.js":"10","C:\\Users\\Huawei\\Рабочий стол\\YP\\react-mesto-auth\\src\\components\\Header.js":"11","C:\\Users\\Huawei\\Рабочий стол\\YP\\react-mesto-auth\\src\\utils\\auth.js":"12","C:\\Users\\Huawei\\Рабочий стол\\YP\\react-mesto-auth\\src\\reportWebVitals.js":"13","C:\\Users\\Huawei\\Рабочий стол\\YP\\react-mesto-auth\\src\\components\\ProtectedRoute.js":"14","C:\\Users\\Huawei\\Рабочий стол\\YP\\react-mesto-auth\\src\\components\\ConfirmationPopup.js":"15","C:\\Users\\Huawei\\Рабочий стол\\YP\\react-mesto-auth\\src\\components\\AddPlacePopup.js":"16","C:\\Users\\Huawei\\Рабочий стол\\YP\\react-mesto-auth\\src\\components\\EditProfilePopup.js":"17","C:\\Users\\Huawei\\Рабочий стол\\YP\\react-mesto-auth\\src\\components\\Register.js":"18","C:\\Users\\Huawei\\Рабочий стол\\YP\\react-mesto-auth\\src\\components\\InfoTooltip.js":"19"},{"size":7547,"mtime":1613233337273,"results":"20","hashOfConfig":"21"},{"size":84,"mtime":1607867232017,"results":"22","hashOfConfig":"21"},{"size":731,"mtime":1607968603892,"results":"23","hashOfConfig":"21"},{"size":608,"mtime":1612691478264,"results":"24","hashOfConfig":"21"},{"size":1576,"mtime":1607966480432,"results":"25","hashOfConfig":"21"},{"size":1818,"mtime":1613311697544,"results":"26","hashOfConfig":"21"},{"size":188,"mtime":1606659562577,"results":"27","hashOfConfig":"21"},{"size":1172,"mtime":1613203131402,"results":"28","hashOfConfig":"21"},{"size":872,"mtime":1608227878719,"results":"29","hashOfConfig":"21"},{"size":495,"mtime":1613231457764,"results":"30","hashOfConfig":"21"},{"size":495,"mtime":1613198564466,"results":"31","hashOfConfig":"21"},{"size":1025,"mtime":1613197149143,"results":"32","hashOfConfig":"21"},{"size":362,"mtime":499162500000,"results":"33","hashOfConfig":"21"},{"size":305,"mtime":1613071521508,"results":"34","hashOfConfig":"21"},{"size":279,"mtime":1608228172468,"results":"35","hashOfConfig":"21"},{"size":1499,"mtime":1613234329767,"results":"36","hashOfConfig":"21"},{"size":1896,"mtime":1608141300737,"results":"37","hashOfConfig":"21"},{"size":1420,"mtime":1613203123565,"results":"38","hashOfConfig":"21"},{"size":787,"mtime":1613202472995,"results":"39","hashOfConfig":"21"},{"filePath":"40","messages":"41","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"42"},"15uvnvn",{"filePath":"43","messages":"44","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"45"},{"filePath":"46","messages":"47","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"48","messages":"49","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"50"},{"filePath":"51","messages":"52","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"53"},{"filePath":"54","messages":"55","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"56","messages":"57","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"58","messages":"59","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"50"},{"filePath":"60","messages":"61","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"62"},{"filePath":"63","messages":"64","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"65","messages":"66","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"67","messages":"68","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"45"},{"filePath":"69","messages":"70","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"71","messages":"72","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"45"},{"filePath":"73","messages":"74","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"50"},{"filePath":"75","messages":"76","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"50"},{"filePath":"77","messages":"78","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"45"},{"filePath":"79","messages":"80","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"81"},{"filePath":"82","messages":"83","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"C:\\Users\\Huawei\\Рабочий стол\\YP\\react-mesto-auth\\src\\components\\App.js",["84","85"],"import React from 'react';\nimport { Route, Switch, Redirect, useHistory } from 'react-router-dom';\nimport Main from './Main.js';\nimport ImagePopup from './ImagePopup.js';\nimport api from '../utils/api.js';\nimport EditProfilePopup from './EditProfilePopup.js';\nimport EditAvatarPopup from './EditAvatarPopup.js';\nimport AddPlacePopup from './AddPlacePopup.js';\nimport ConfirmationPopup from './ConfirmationPopup.js';\nimport Login from './Login.js';\nimport Register from './Register.js';\nimport ProtectedRoute from './ProtectedRoute.js';\nimport InfoTooltip from './InfoTooltip.js';\nimport * as auth from '../utils/auth.js';\nimport Footer from './Footer.js';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext.js';\n\nfunction App() {\n\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = React.useState(false);\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = React.useState(false);\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = React.useState(false);\n  const [isInfoTooltipPopupOpen, setIsInfoTooltipPopupOpen] = React.useState(false);\n  const [cards, setCards] = React.useState([]);\n  const [selectedCard, setSelectedCard] = React.useState({});\n  const [currentUser, setCurrentUser] = React.useState('');\n  const [loading, setLoading] = React.useState('Сохранить');\n  const [loadingPlace, setLoadingPlace] = React.useState('Создать');\n\n  const [loggedIn, setLoggedIn] = React.useState(false);\n  const [email, setEmail] = React.useState('');\n  const [registered, setRegistered] = React.useState(false);\n\n  const history = useHistory();\n\n  React.useEffect(() => {\n    tokenCheck();\n  }, []);\n\n  React.useEffect(() => {\n    if (loggedIn) {\n      history.push('/');\n    }\n  }, [loggedIn])\n\n\n  React.useEffect(() => {\n    Promise.all([\n      api.getUserData(),\n      api.getInitialCards()\n    ])\n    .then(([userInfo, initialCards]) => {\n      setCurrentUser(userInfo);\n      setCards(initialCards)\n    })\n    .catch((err) => {\n      console.log(err);\n    })\n  }, [])\n\n\n  React.useEffect(() => {\n    const ESC = 'Escape';\n    function handleEscClose(evt) {\n      if (evt.key === ESC) {\n        closeAllPopups();\n      }\n    }\n    document.addEventListener('keyup', handleEscClose);\n    return () => document.removeEventListener('keyup', handleEscClose)\n  }, [])\n\n\n  function handleEditProfileClick() {\n    setIsEditProfilePopupOpen(true);\n    setLoading('Сохранить')\n  }\n\n  function handleEditAvatarClick() {\n    setIsEditAvatarPopupOpen(true);\n    setLoading('Сохранить')\n  }\n\n  function handleAddPlaceClick() {\n    setIsAddPlacePopupOpen(true);\n    setLoadingPlace('Создать')\n  }\n\n  function closeAllPopups() {\n    setIsEditProfilePopupOpen(false);\n    setIsEditAvatarPopupOpen(false);\n    setIsAddPlacePopupOpen(false);\n    setIsInfoTooltipPopupOpen(false);\n    setSelectedCard({})\n  }\n\n  function handleCardClick(card) {\n    setSelectedCard({\n      link: card.link,\n      name: card.name\n    })\n  }\n\n  function handleCardLike(card) {\n    const isLiked = card.likes.some(i => i._id === currentUser._id);\n\n    api.changeLikeCardStatus(card._id, !isLiked)\n      .then((newCard) => {\n        const newCards = cards.map((c) => c._id === card._id ? newCard : c);\n        setCards(newCards);\n    })\n      .catch((err) => {\n      console.log(err)\n      })\n\n  }\n\n  function handleCardDelete(card) {\n    api.deleteCard(card._id)\n      .then(()=>{\n        const newCards = cards.filter((c) => c._id !== card._id);\n        setCards(newCards);\n      })\n      .catch((err) => {\n        console.log(err)\n        })\n  }\n\n  function handleUpdateUser(userInfo) {\n    setLoading('Сохранение...');\n    api.saveUserData(userInfo)\n      .then((inputValues)=> {\n        setCurrentUser(inputValues);\n        closeAllPopups()\n      })\n      .catch((err) => {\n        console.log(err)\n        })\n  }\n\n  function handleUpdateAvatar(data) {\n    setLoading('Сохранение...');\n    api.saveAvatar(data)\n      .then((avatar)=> {\n        setCurrentUser(avatar);\n        closeAllPopups()\n      })\n      .catch((err) => {\n        console.log(err)\n        })\n  }\n\n  function handleAddPlaceSubmit(data) {\n    setLoadingPlace('Сохранение...')\n    api.saveNewCard(data)\n      .then((newCard)=> {\n        setCards([newCard, ...cards]);\n        closeAllPopups()\n      })\n      .catch((err) => {\n        console.log(err)\n        })\n  }\n\n  function handleLogin(data) {\n    const {email, password} = data;\n    auth.authorize(email, password)\n      .then((res) => {\n        if (res) {\n          setLoggedIn(true);\n          localStorage.setItem('token', res.token);\n          setEmail(email);\n          history.push(\"/\");\n        }\n      })\n      .catch((err) => {console.log(err)})\n  }\n\n  function handleRegister(data) {\n    const {email, password} = data;\n    auth.register(email, password)\n      .then((res) => {\n        if (res) {\n          setIsInfoTooltipPopupOpen(true);\n          setRegistered(true);\n          history.push('/sign-in');\n        }\n      })\n      .catch((err) => {\n        console.log(err);\n        setIsInfoTooltipPopupOpen(true);\n        setRegistered(false);\n      })\n  }\n\n  function tokenCheck() {\n    const token = localStorage.getItem('token');\n    if (token) {\n      auth.getContent(token)\n        .then((res) => {\n          if (res) {\n            setLoggedIn(true);\n            history.push(\"/\");\n            setEmail(res.data.email);\n          }\n        })\n        .catch((err) => {\n          console.log(err);\n        });\n    }\n\n  }\n\n\n  function handleSignOut() {\n    setLoggedIn(false);\n    localStorage.removeItem('token');\n    history.push('/sign-in')\n  }\n\n\n  return (\n    <div className=\"page\">\n      <CurrentUserContext.Provider value={currentUser}>\n\n      <Switch>\n      <Route path=\"/sign-in\">\n          <Login handleLogin={handleLogin} />\n        </Route>\n        <Route path=\"/sign-up\">\n          <Register onRegister={handleRegister} />\n        </Route>\n        <ProtectedRoute\n          path=\"/\"\n          loggedIn={loggedIn}\n          component={Main}\n          onEditProfile={handleEditProfileClick}\n          onEditAvatar={handleEditAvatarClick}\n          onAddPlace={handleAddPlaceClick}\n          userAvatar={currentUser.avatar}\n          name={currentUser.name}\n          about={currentUser.about}\n          handleSignOut={handleSignOut}\n          email={email}\n          cards={cards}\n          handleCardClick={handleCardClick}\n          handleCardLike={handleCardLike}\n          handleCardDelete={handleCardDelete}\n        />\n       <Route>\n          {loggedIn ? <Redirect to=\"/\" /> : <Redirect to=\"/sign-in\" />}\n       </Route>\n      </Switch>\n\n      <Footer />\n\n      <InfoTooltip\n        isOpen={isInfoTooltipPopupOpen}\n        onClose={closeAllPopups}\n        registered={registered} />\n\n        <EditProfilePopup\n          isOpen={isEditProfilePopupOpen}\n          onClose={closeAllPopups}\n          onUpdateUser={handleUpdateUser}\n          btnValue={loading} />\n\n        <AddPlacePopup\n          isOpen={isAddPlacePopupOpen}\n          onClose={closeAllPopups}\n          onAddPlace={handleAddPlaceSubmit}\n          btnValue={loadingPlace} />\n\n        <ImagePopup\n          card={selectedCard}\n          onClose={closeAllPopups} />\n\n        <ConfirmationPopup />\n\n        <EditAvatarPopup\n          isOpen={isEditAvatarPopupOpen}\n          onClose={closeAllPopups}\n          onUpdateAvatar={handleUpdateAvatar}\n          btnValue={loading} />\n\n      </CurrentUserContext.Provider>\n    </div>\n\n  );\n}\n\nexport default App;\n","C:\\Users\\Huawei\\Рабочий стол\\YP\\react-mesto-auth\\src\\contexts\\CurrentUserContext.js",[],["86","87"],"C:\\Users\\Huawei\\Рабочий стол\\YP\\react-mesto-auth\\src\\components\\PopupWithForm.js",[],"C:\\Users\\Huawei\\Рабочий стол\\YP\\react-mesto-auth\\src\\index.js",[],["88","89"],"C:\\Users\\Huawei\\Рабочий стол\\YP\\react-mesto-auth\\src\\components\\Card.js",[],["90","91"],"C:\\Users\\Huawei\\Рабочий стол\\YP\\react-mesto-auth\\src\\components\\Main.js",[],"C:\\Users\\Huawei\\Рабочий стол\\YP\\react-mesto-auth\\src\\components\\Footer.js",[],"C:\\Users\\Huawei\\Рабочий стол\\YP\\react-mesto-auth\\src\\components\\Login.js",[],"C:\\Users\\Huawei\\Рабочий стол\\YP\\react-mesto-auth\\src\\components\\EditAvatarPopup.js",[],["92","93"],"C:\\Users\\Huawei\\Рабочий стол\\YP\\react-mesto-auth\\src\\components\\ImagePopup.js",[],"C:\\Users\\Huawei\\Рабочий стол\\YP\\react-mesto-auth\\src\\components\\Header.js",[],"C:\\Users\\Huawei\\Рабочий стол\\YP\\react-mesto-auth\\src\\utils\\auth.js",[],"C:\\Users\\Huawei\\Рабочий стол\\YP\\react-mesto-auth\\src\\reportWebVitals.js",[],"C:\\Users\\Huawei\\Рабочий стол\\YP\\react-mesto-auth\\src\\components\\ProtectedRoute.js",[],"C:\\Users\\Huawei\\Рабочий стол\\YP\\react-mesto-auth\\src\\components\\ConfirmationPopup.js",[],"C:\\Users\\Huawei\\Рабочий стол\\YP\\react-mesto-auth\\src\\components\\AddPlacePopup.js",[],"C:\\Users\\Huawei\\Рабочий стол\\YP\\react-mesto-auth\\src\\components\\EditProfilePopup.js",[],"C:\\Users\\Huawei\\Рабочий стол\\YP\\react-mesto-auth\\src\\components\\Register.js",[],["94","95"],"C:\\Users\\Huawei\\Рабочий стол\\YP\\react-mesto-auth\\src\\components\\InfoTooltip.js",[],{"ruleId":"96","severity":1,"message":"97","line":38,"column":6,"nodeType":"98","endLine":38,"endColumn":8,"suggestions":"99"},{"ruleId":"96","severity":1,"message":"100","line":44,"column":6,"nodeType":"98","endLine":44,"endColumn":16,"suggestions":"101"},{"ruleId":"102","replacedBy":"103"},{"ruleId":"104","replacedBy":"105"},{"ruleId":"102","replacedBy":"106"},{"ruleId":"104","replacedBy":"107"},{"ruleId":"102","replacedBy":"108"},{"ruleId":"104","replacedBy":"109"},{"ruleId":"102","replacedBy":"110"},{"ruleId":"104","replacedBy":"111"},{"ruleId":"102","replacedBy":"112"},{"ruleId":"104","replacedBy":"113"},"react-hooks/exhaustive-deps","React Hook React.useEffect has a missing dependency: 'tokenCheck'. Either include it or remove the dependency array.","ArrayExpression",["114"],"React Hook React.useEffect has a missing dependency: 'history'. Either include it or remove the dependency array.",["115"],"no-native-reassign",["116"],"no-negated-in-lhs",["117"],["116"],["117"],["116"],["117"],["116"],["117"],["116"],["117"],{"desc":"118","fix":"119"},{"desc":"120","fix":"121"},"no-global-assign","no-unsafe-negation","Update the dependencies array to be: [tokenCheck]",{"range":"122","text":"123"},"Update the dependencies array to be: [history, loggedIn]",{"range":"124","text":"125"},[1629,1631],"[tokenCheck]",[1717,1727],"[history, loggedIn]"]