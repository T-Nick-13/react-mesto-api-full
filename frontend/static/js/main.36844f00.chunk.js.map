{"version":3,"sources":["contexts/CurrentUserContext.js","images/logo.svg","components/Header.js","components/Card.js","components/Main.js","components/ImagePopup.js","utils/api.js","components/PopupWithForm.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","components/AddPlacePopup.js","components/ConfirmationPopup.js","components/Login.js","components/Register.js","components/ProtectedRoute.js","images/Registered.svg","images/UnRegistered.svg","components/InfoTooltip.js","utils/auth.js","components/Footer.js","components/App.js","reportWebVitals.js","index.js"],"names":["CurrentUserContext","React","createContext","Header","props","className","src","logoPath","alt","children","to","headerRoute","headerClass","onClick","handleSignOut","headerLink","Card","card","onCardLike","onCardClick","onCardDelete","currentUser","useContext","isOwn","owner","_id","cardDeleteButtonClassName","isLiked","likes","some","i","cardLikeButtonClassName","link","name","type","length","Main","email","onEditAvatar","avatar","onEditProfile","about","onAddPlace","cards","map","handleCardClick","handleCardLike","handleCardDelete","ImagePopup","onClose","api","config","this","_url","url","_headers","headers","res","ok","json","Promise","reject","fetch","then","_checkServerResponse","data","method","body","JSON","stringify","cardId","saveLike","deleteLike","authorization","PopupWithForm","isOpen","title","noValidate","onSubmit","btnValue","EditProfilePopup","useState","setName","description","setDescription","useEffect","e","preventDefault","onUpdateUser","id","placeholder","minLength","maxLength","required","value","onChange","target","EditAvatarPopup","onUpdateAvatar","inputLink","useRef","current","ref","AddPlacePopup","cardTitle","setCardTitle","cardLink","setCardLink","ConfirmationPopup","Login","handleLogin","password","setData","handleChange","username","Register","onRegister","ProtectedRoute","Component","component","loggedIn","infoTooltip","registered","LogoRegistered","LogoUnRegistered","BASE_URL","checkResponse","response","Footer","App","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","isAddPlacePopupOpen","setIsAddPlacePopupOpen","isInfoTooltipPopupOpen","setIsInfoTooltipPopupOpen","setCards","selectedCard","setSelectedCard","setCurrentUser","loading","setLoading","loadingPlace","setLoadingPlace","setLoggedIn","setEmail","setRegistered","history","useHistory","closeAllPopups","token","localStorage","getItem","auth","push","catch","err","console","log","tokenCheck","all","getUserData","getInitialCards","userInfo","initialCards","handleEscClose","evt","key","document","addEventListener","removeEventListener","Provider","path","setItem","userAvatar","removeItem","changeLikeCardStatus","newCard","newCards","c","deleteCard","filter","InfoTooltip","saveUserData","inputValues","saveNewCard","saveAvatar","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.36844f00.chunk.js","sourcesContent":["import React from 'react'\n\nexport const CurrentUserContext = React.createContext();\n","export default __webpack_public_path__ + \"static/media/logo.c2821b38.svg\";","import { Link } from 'react-router-dom';\nimport logoPath from '../images/logo.svg';\n\nfunction Header(props) {\n  return (\n    <header className=\"header page__header\">\n      <img className=\"header__logo\" src={logoPath} alt=\"Лого Mesto\"/>\n        <div className=\"header__container\">\n          {props.children}\n          <Link to={props.headerRoute} className={props.headerClass} onClick={props.handleSignOut}>{props.headerLink}</Link>\n        </div>\n    </header>\n  )\n}\n\nexport default Header;\n","import React from 'react';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\n\nfunction Card( { card, onCardLike, onCardClick, onCardDelete }) {\n\n  const currentUser = React.useContext(CurrentUserContext);\n\n  const isOwn = card.owner._id === currentUser._id;\n\n  const cardDeleteButtonClassName = (`elements__del ${isOwn ? 'elements__del_active' : ''}`);\n\n  const isLiked = card.likes.some(i => i._id === currentUser._id);\n  const cardLikeButtonClassName = (`elements__like ${isLiked ? 'elements__like_active' : ''}`);\n\n\n  function handleClick() {\n    onCardClick({\n      link: card.link,\n      name: card.name\n    });\n  }\n\n  function handleLikeClick() {\n    onCardLike(card);\n  }\n\n  function handleDeleteClick() {\n    onCardDelete(card);\n  }\n\n\n  return(\n    <li className=\"elements__element\">\n      <img className=\"elements__img\" src={card.link} alt={card.name} onClick={handleClick} />\n      <div className=\"elements__container\">\n        <h2 className=\"elements__title\">{card.name}</h2>\n        <div className=\"elements__like-container\">\n          <button type=\"button\" className={cardLikeButtonClassName} src=\"./images/Vector.svg\" alt=\"Изображение отметка Нравится\"\n          onClick={handleLikeClick} ></button>\n          <p className=\"elements__like-counter\">{card.likes.length}</p>\n        </div>\n      </div>\n      <button type=\"button\" className={cardDeleteButtonClassName} src=\"./images/Group.svg\" alt=\"Изображение удалить\"\n      onClick={handleDeleteClick} ></button>\n    </li>\n  )\n}\n\nexport default Card\n","import React from 'react';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\nimport Header from './Header.js';\nimport Card from './Card.js';\n\nfunction Main(props) {\n\n  const currentUser = React.useContext(CurrentUserContext);\n\n  return (\n    <>\n      <Header headerRoute=\"/sign-in\" headerLink=\"Выйти\" handleSignOut={props.handleSignOut} headerClass=\"header__link_grey\">\n        <p className=\"header__user\">{props.email}</p>\n      </Header>\n      <main>\n        <section\n          className=\"profile page__profile\">\n          <div className=\"profile__container\">\n            <div className=\"profile__avatar_overlay\" onClick={props.onEditAvatar} ></div>\n            <img className=\"profile__avatar\" src={currentUser.avatar} alt=\"Изображение аватар\" />\n            <div className=\"profile__info\">\n              <div className=\"profile__container-name\">\n                <h1 className=\"profile__name\">{currentUser.name}</h1>\n                <button type=\"button\" className=\"profile__edit-button\" onClick={props.onEditProfile}></button>\n              </div>\n              <p className=\"profile__occupation\">{currentUser.about}</p>\n            </div>\n\n          </div>\n          <button type=\"button\" className=\"profile__add-button\" onClick={props.onAddPlace}></button>\n        </section>\n        <ul className=\"elements page__elements\">\n          {\n            props.cards.map((card)=>{\n              return (\n                <Card\n                  key={card._id}\n                  card={card}\n                  onCardClick={props.handleCardClick}\n                  onCardLike={props.handleCardLike}\n                  onCardDelete={props.handleCardDelete}\n                />\n              )\n            })\n          }\n        </ul>\n      </main>\n    </>\n  )\n}\n\nexport default Main;\n","function ImagePopup(props) {\n  return(\n    <div className={`popup-image ${props.card.link ? 'popup_opened' : ''}`} >\n      <div className=\"popup-image__container\">\n        <img className=\"popup-image__picture\" src={props.card.link} alt={props.card.name} />\n        <p className=\"popup-image__title\">{props.card.name}</p>\n        <button className=\"popup-image__close-btn popup__close-btn\" type=\"button\" onClick={props.onClose} ></button>\n      </div>\n    </div>\n  )\n}\n\nexport default ImagePopup\n","class Api {\n  constructor(config) {\n    this._url = config.url;\n    this._headers = config.headers;\n  }\n\n  _checkServerResponse(res) {\n    if (res.ok) {\n      return res.json()\n    }\n    return Promise.reject('Some error')\n  }\n\n\n  getInitialCards() {\n    return fetch(`${this._url}/cards`, {\n      headers: this._headers\n    })\n    .then(this._checkServerResponse);\n  }\n\n\n  saveNewCard(data) {\n    return fetch(`${this._url}/cards`, {\n      method: 'POST',\n      headers: this._headers,\n      body: JSON.stringify(data)\n    })\n    .then(this._checkServerResponse);\n  }\n\n\n  deleteCard(cardId) {\n    return fetch(`${this._url}/cards/${cardId}`, {\n      method: 'DELETE',\n      headers: this._headers\n    })\n    .then(this._checkServerResponse);\n  }\n\n\n  getUserData() {\n    return fetch(`${this._url}/users/me`, {\n      headers: this._headers\n    })\n    .then(this._checkServerResponse);\n  }\n\n\n  saveUserData(data) {\n    return fetch(`${this._url}/users/me`, {\n      method: 'PATCH',\n      headers: this._headers,\n      body: JSON.stringify(data)\n    })\n    .then(this._checkServerResponse);\n  }\n\n\n  saveAvatar(data) {\n    return fetch(`${this._url}/users/me/avatar`, {\n      method: 'PATCH',\n      headers: this._headers,\n      body: JSON.stringify(data)\n    })\n    .then(this._checkServerResponse);\n  }\n\n\n  saveLike(cardId) {\n    return fetch(`${this._url}/cards/likes/${cardId}`, {\n      method: 'PUT',\n      headers: this._headers,\n    })\n    .then(this._checkServerResponse);\n  }\n\n\n  deleteLike(cardId) {\n    return fetch(`${this._url}/cards/likes/${cardId}`, {\n      method: 'DELETE',\n      headers: this._headers,\n    })\n    .then(this._checkServerResponse);\n  }\n\n  changeLikeCardStatus(cardId, isLiked) {\n    return isLiked ? this.saveLike(cardId) : this.deleteLike(cardId);\n  }\n\n}\n\n\nconst api = new Api ({\n  url: 'https://mesto.nomoreparties.co/v1/cohort-17',\n  headers: {\n    authorization: 'd0f4e15e-5e8f-4105-8cb3-71e6a52f3645',\n    'content-type': 'application/json'\n  }\n});\n\nexport default api\n","\nfunction PopupWithForm(props) {\n\n  return(\n    <div className={`popup popup${props.name} ${props.isOpen ? 'popup_opened' : ''}`} >\n      <div className=\"popup__container\" >\n        <h2 className=\"popup__heading\">{props.title}</h2>\n        <form className=\"popup__form popup__form_profile\" noValidate onSubmit={props.onSubmit} >{props.children}\n        <button className=\"popup__btn\" type=\"submit\">{props.btnValue}</button>\n        </form>\n        <button className=\"popup__close-btn\" type=\"button\" onClick={props.onClose}></button>\n      </div>\n    </div>\n  )\n}\n\nexport default PopupWithForm\n\n/*\n«Редактировать профиль»\n«Новое место»\n«Обновить аватар»\n«Вы уверены?»\n*/\n","import React from 'react';\nimport PopupWithForm from './PopupWithForm.js';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\n\nfunction EditProfilePopup(props) {\n\n  const [name, setName] = React.useState('');\n  const [description, setDescription] = React.useState('');\n\n  const currentUser = React.useContext(CurrentUserContext);\n\n  function handleChangeName(e) {\n    setName(e.target.value);\n  }\n\n  function handleChangeDescription(e) {\n    setDescription(e.target.value);\n  }\n\n  function handleSubmit(e) {\n    e.preventDefault();\n    props.onUpdateUser({\n      name,\n      about: description,\n    });\n  }\n\n  React.useEffect(() => {\n    if (currentUser) {\n    setName(currentUser.name);\n    setDescription(currentUser.about);\n    }\n  }, [currentUser]);\n\n\n  return (\n    <PopupWithForm name=\"profile\"\n      title=\"Редактировать профиль\"\n      isOpen={props.isOpen}\n      onClose={props.onClose}\n      btnValue={props.btnValue}\n      onSubmit={handleSubmit} >\n        <input\n          id=\"input-name\"\n          type=\"text\"\n          placeholder=\"Имя\"\n          className=\"popup__text popup__text_name\"\n          minLength=\"2\"\n          maxLength=\"40\"\n          required\n          value={name}\n          onChange={handleChangeName}\n          name=\"name\"\n        />\n        <span\n          id=\"input-name-error\"\n          className=\"popup__text-error\">\n        </span>\n        <input\n          id=\"input-occupation\"\n          type=\"text\" placeholder=\"О себе\"\n          className=\"popup__text popup__text_occupation\"\n          minLength=\"2\" maxLength=\"200\"\n          required\n          value={description}\n          onChange={handleChangeDescription}\n          name=\"about\"\n        />\n        <span\n          id=\"input-occupation-error\"\n          className=\"popup__text-error\">\n        </span>\n    </PopupWithForm>\n  )\n}\n\nexport default EditProfilePopup\n","import React from 'react';\nimport PopupWithForm from './PopupWithForm.js';\n\nfunction EditAvatarPopup({ onUpdateAvatar, isOpen, onClose, btnValue }) {\n\n  const inputLink = React.useRef();\n\n  function handleSubmit(e) {\n    e.preventDefault();\n    onUpdateAvatar({\n      avatar: inputLink.current.value\n    });\n  }\n\n\n  return (\n    <PopupWithForm\n      name=\"-avatar\"\n      title=\"Обновить аватар\"\n      btnValue={btnValue}\n      isOpen={isOpen}\n      onClose={onClose}\n      onSubmit={handleSubmit} >\n      <input\n        id=\"input-link\"\n        type=\"url\"\n        placeholder=\"Ссылка на картинку\"\n        className=\"popup__text popup__text_link\"\n        ref={inputLink}\n        required/>\n      <span\n        id=\"input-link-error\"\n        className=\"popup__text-error\">\n      </span>\n    </PopupWithForm>\n  )\n}\n\nexport default EditAvatarPopup\n","import React from 'react';\nimport PopupWithForm from './PopupWithForm.js';\n\nfunction AddPlacePopup({ onAddPlace, isOpen, onClose, btnValue }) {\n\n  const [cardTitle, setCardTitle] = React.useState('');\n  const [cardLink, setCardLink] = React.useState('');\n\n  function handleChangeName(e) {\n    setCardTitle(e.target.value);\n  }\n\n  function handleChangeLink(e) {\n    setCardLink(e.target.value);\n  }\n\n  function handleSubmit(e) {\n    e.preventDefault();\n    onAddPlace({\n      name: cardTitle,\n      link: cardLink\n    });\n    setCardTitle('');\n    setCardLink('')\n  }\n\n\n  return (\n    <PopupWithForm\n      name=\"_card\"\n      title=\"Новое место\"\n      isOpen={isOpen}\n      onClose={onClose}\n      btnValue={btnValue}\n      onSubmit={handleSubmit} >\n      <input id=\"input-place\"\n        type=\"text\"\n        placeholder=\"Название\"\n        className=\"popup__text popup__text_place\"\n        minLength=\"1\"\n        maxLength=\"30\"\n        required\n        onChange={handleChangeName}\n        value={cardTitle} />\n      <span id=\"input-place-error\"\n        className=\"popup__text-error\">\n      </span>\n      <input id=\"input-link\"\n        type=\"url\"\n        placeholder=\"Ссылка на картинку\"\n        className=\"popup__text popup__text_link\"\n        required\n        onChange={handleChangeLink}\n        value={cardLink} />\n      <span\n        id=\"input-link-error\"\n        className=\"popup__text-error\">\n      </span>\n    </PopupWithForm>\n  )\n}\n\nexport default AddPlacePopup\n","import React from 'react';\nimport PopupWithForm from './PopupWithForm.js';\n\nfunction ConfirmationPopup() {\n\n  return (\n    <PopupWithForm\n      name=\"-submit\"\n      title=\"Вы уверены?\"\n      btnValue=\"Да\" >\n    </PopupWithForm>\n  )\n}\n\nexport default ConfirmationPopup\n","import React, { useState } from 'react';\nimport Header from './Header.js';\n\nfunction Login({handleLogin}) {\n\n  const [data, setData] = useState({\n    email: '',\n    password: ''\n  })\n\n  function handleChange(e) {\n    const {name, value} = e.target;\n    setData({\n      ...data,\n      [name]: value\n    });\n  }\n\n  function handleSubmit(e) {\n    e.preventDefault();\n    handleLogin(data);\n  }\n\n  return(\n    <div className=\"page-auth\">\n      <Header headerRoute=\"/sign-up\" headerLink=\"Регистрация\" headerClass=\"header__link\"/>\n      <div className=\"auth\">\n        <p className=\"auth__heading\">Вход</p>\n        <form onSubmit={handleSubmit} className=\"auth__form\">\n          <input id=\"email\" className=\"auth__input\" required name=\"email\" type=\"email\"\n            value={data.username} onChange={handleChange} placeholder=\"Email\" />\n          <input id=\"password\" className=\"auth__input\" required name=\"password\" type=\"password\"\n            value={data.password} onChange={handleChange} placeholder=\"Пароль\" />\n          <button type=\"submit\" className=\"auth__btn\">Войти</button>\n        </form>\n      </div>\n    </div>\n  )\n}\n\nexport default Login;\n","import React, { useState } from 'react';\nimport Header from './Header.js';\nimport { Link } from 'react-router-dom';\n\nfunction Register({onRegister}) {\n\n  const [data, setData] = useState({\n    email: '',\n    password: ''\n  });\n\n  function handleChange(e) {\n    const {name, value} = e.target;\n    setData({\n      ...data,\n      [name]: value\n    });\n  }\n\n  function handleSubmit(e) {\n    e.preventDefault();\n    onRegister(data)\n  }\n\n  return(\n    <div className=\"page-auth\">\n      <Header headerRoute=\"/sign-in\" headerLink=\"Войти\" headerClass=\"header__link\" />\n      <div className=\"auth\">\n        <p className=\"auth__heading\">Регистрация</p>\n        <form onSubmit={handleSubmit} className=\"auth__form\">\n          <input id=\"username\" className=\"auth__input\" required name=\"email\" type=\"email\"\n            value={data.username} onChange={handleChange} placeholder=\"Email\" />\n          <input id=\"password\" className=\"auth__input\" required name=\"password\" type=\"password\"\n            value={data.password} onChange={handleChange} placeholder=\"Пароль\" />\n          <button type=\"submit\" className=\"auth__btn\">Зарегистрироваться</button>\n          <p className=\"auth__text\">Уже зарегистрированы?&nbsp;\n            <Link to=\"/sign-in\" className=\"auth__link\">Войти</Link>\n          </p>\n        </form>\n      </div>\n    </div>\n  )\n}\n\nexport default Register;\n","import React from 'react';\nimport { Route, Redirect } from 'react-router-dom';\n\nconst ProtectedRoute = ({ component: Component, ...props  }) => {\n  return (\n    <Route>\n      { () => props.loggedIn ? <Component {...props} /> : <Redirect to=\"/sign-in\" /> }\n    </Route>\n)}\n\n\nexport default ProtectedRoute;\n","export default __webpack_public_path__ + \"static/media/Registered.1b6082f8.svg\";","export default __webpack_public_path__ + \"static/media/UnRegistered.df8eddf6.svg\";","import LogoRegistered from '../images/Registered.svg';\nimport LogoUnRegistered from '../images/UnRegistered.svg';\n\nfunction infoTooltip(props) {\n\n  return(\n    <div className={`popup ${props.isOpen ? 'popup_active' : ''}`} >\n      <div className=\"popup__container\" >\n        <img className=\"popup__regLogo\" src={props.registered ? LogoRegistered : LogoUnRegistered } alt=\"Лого результат регистрации\" />\n        <p className=\"popup__RegText\">{props.registered ? 'Вы успешно зарегистрировались!' : 'Что-то пошло не так! Попробуйте ещё раз.'}\n        </p>\n        <button className=\"popup__close-btn\" type=\"button\" onClick={props.onClose}></button>\n      </div>\n    </div>\n  )\n}\n\nexport default infoTooltip;\n","export const BASE_URL = 'https://auth.nomoreparties.co';\n\nfunction checkResponse(response) {\n  if (response.ok) {\n    return response.json();\n  }\n  else {\n    return Promise.reject('Ошибка на сервере');\n  }\n}\n\nexport const authorize = (email, password) => {\n  return fetch(`${BASE_URL}/signin`, {\n    method: 'POST',\n    headers: {\n      'Accept': 'application/json',\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({email, password})\n  })\n  .then(checkResponse);\n};\n\nexport const register = (email, password) => {\n  return fetch(`${BASE_URL}/signup`, {\n    method: 'POST',\n    headers: {\n      'Accept': 'application/json',\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({email, password})\n  })\n  .then(checkResponse)\n};\n\n\nexport const getContent = (token) => {\n  return fetch(`${BASE_URL}/users/me`, {\n    method: 'GET',\n    headers: {\n      \"Content-Type\": \"application/json\",\n      \"Authorization\": `Bearer ${token}`\n    }\n  })\n  .then(checkResponse);\n};\n","function Footer() {\n  return (\n    <footer className=\"footer page__footer\">\n      <p className=\"footer__copyright\">&copy; 2020 Mesto Russia</p>\n    </footer>\n  )\n}\n\nexport default Footer;\n","import React from 'react';\nimport { Route, Switch, Redirect, useHistory } from 'react-router-dom';\nimport Main from './Main.js';\nimport ImagePopup from './ImagePopup.js';\nimport api from '../utils/api.js';\nimport EditProfilePopup from './EditProfilePopup.js';\nimport EditAvatarPopup from './EditAvatarPopup.js';\nimport AddPlacePopup from './AddPlacePopup.js';\nimport ConfirmationPopup from './ConfirmationPopup.js';\nimport Login from './Login.js';\nimport Register from './Register.js';\nimport ProtectedRoute from './ProtectedRoute.js';\nimport InfoTooltip from './InfoTooltip.js';\nimport * as auth from '../utils/auth.js';\nimport Footer from './Footer.js';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext.js';\n\nfunction App() {\n\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = React.useState(false);\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = React.useState(false);\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = React.useState(false);\n  const [isInfoTooltipPopupOpen, setIsInfoTooltipPopupOpen] = React.useState(false);\n  const [cards, setCards] = React.useState([]);\n  const [selectedCard, setSelectedCard] = React.useState({});\n  const [currentUser, setCurrentUser] = React.useState('');\n  const [loading, setLoading] = React.useState('Сохранить');\n  const [loadingPlace, setLoadingPlace] = React.useState('Создать');\n\n  const [loggedIn, setLoggedIn] = React.useState(false);\n  const [email, setEmail] = React.useState('');\n  const [registered, setRegistered] = React.useState(false);\n\n  const history = useHistory();\n\n  React.useEffect(() => {\n    tokenCheck();\n  }, []);\n\n  React.useEffect(() => {\n    if (loggedIn) {\n      history.push('/');\n    }\n  }, [loggedIn])\n\n\n  React.useEffect(() => {\n    Promise.all([\n      api.getUserData(),\n      api.getInitialCards()\n    ])\n    .then(([userInfo, initialCards]) => {\n      setCurrentUser(userInfo);\n      setCards(initialCards)\n    })\n    .catch((err) => {\n      console.log(err);\n    })\n  }, [])\n\n\n  React.useEffect(() => {\n    const ESC = 'Escape';\n    function handleEscClose(evt) {\n      if (evt.key === ESC) {\n        closeAllPopups();\n      }\n    }\n    document.addEventListener('keyup', handleEscClose);\n    return () => document.removeEventListener('keyup', handleEscClose)\n  }, [])\n\n\n  function handleEditProfileClick() {\n    setIsEditProfilePopupOpen(true);\n    setLoading('Сохранить')\n  }\n\n  function handleEditAvatarClick() {\n    setIsEditAvatarPopupOpen(true);\n    setLoading('Сохранить')\n  }\n\n  function handleAddPlaceClick() {\n    setIsAddPlacePopupOpen(true);\n    setLoadingPlace('Создать')\n  }\n\n  function closeAllPopups() {\n    setIsEditProfilePopupOpen(false);\n    setIsEditAvatarPopupOpen(false);\n    setIsAddPlacePopupOpen(false);\n    setIsInfoTooltipPopupOpen(false);\n    setSelectedCard({})\n  }\n\n  function handleCardClick(card) {\n    setSelectedCard({\n      link: card.link,\n      name: card.name\n    })\n  }\n\n  function handleCardLike(card) {\n    const isLiked = card.likes.some(i => i._id === currentUser._id);\n\n    api.changeLikeCardStatus(card._id, !isLiked)\n      .then((newCard) => {\n        const newCards = cards.map((c) => c._id === card._id ? newCard : c);\n        setCards(newCards);\n    })\n      .catch((err) => {\n      console.log(err)\n      })\n\n  }\n\n  function handleCardDelete(card) {\n    api.deleteCard(card._id)\n      .then(()=>{\n        const newCards = cards.filter((c) => c._id !== card._id);\n        setCards(newCards);\n      })\n      .catch((err) => {\n        console.log(err)\n        })\n  }\n\n  function handleUpdateUser(userInfo) {\n    setLoading('Сохранение...');\n    api.saveUserData(userInfo)\n      .then((inputValues)=> {\n        setCurrentUser(inputValues);\n        closeAllPopups()\n      })\n      .catch((err) => {\n        console.log(err)\n        })\n  }\n\n  function handleUpdateAvatar(data) {\n    setLoading('Сохранение...');\n    api.saveAvatar(data)\n      .then((avatar)=> {\n        setCurrentUser(avatar);\n        closeAllPopups()\n      })\n      .catch((err) => {\n        console.log(err)\n        })\n  }\n\n  function handleAddPlaceSubmit(data) {\n    setLoadingPlace('Сохранение...')\n    api.saveNewCard(data)\n      .then((newCard)=> {\n        setCards([newCard, ...cards]);\n        closeAllPopups()\n      })\n      .catch((err) => {\n        console.log(err)\n        })\n  }\n\n  function handleLogin(data) {\n    const {email, password} = data;\n    auth.authorize(email, password)\n      .then((res) => {\n        if (res) {\n          setLoggedIn(true);\n          localStorage.setItem('token', res.token);\n          setEmail(email);\n          history.push(\"/\");\n        }\n      })\n      .catch((err) => {console.log(err)})\n  }\n\n  function handleRegister(data) {\n    const {email, password} = data;\n    auth.register(email, password)\n      .then((res) => {\n        if (res) {\n          setIsInfoTooltipPopupOpen(true);\n          setRegistered(true);\n          history.push('/sign-in');\n        }\n      })\n      .catch((err) => {\n        console.log(err);\n        setIsInfoTooltipPopupOpen(true);\n        setRegistered(false);\n      })\n  }\n\n  function tokenCheck() {\n    const token = localStorage.getItem('token');\n    if (token) {\n      auth.getContent(token)\n        .then((res) => {\n          if (res) {\n            setLoggedIn(true);\n            history.push(\"/\");\n            setEmail(res.data.email);\n          }\n        })\n        .catch((err) => {\n          console.log(err);\n        });\n    }\n\n  }\n\n\n  function handleSignOut() {\n    setLoggedIn(false);\n    localStorage.removeItem('token');\n    history.push('/sign-in')\n  }\n\n\n  return (\n    <div className=\"page\">\n      <CurrentUserContext.Provider value={currentUser}>\n\n      <Switch>\n      <Route path=\"/sign-in\">\n          <Login handleLogin={handleLogin} />\n        </Route>\n        <Route path=\"/sign-up\">\n          <Register onRegister={handleRegister} />\n        </Route>\n        <ProtectedRoute\n          path=\"/\"\n          loggedIn={loggedIn}\n          component={Main}\n          onEditProfile={handleEditProfileClick}\n          onEditAvatar={handleEditAvatarClick}\n          onAddPlace={handleAddPlaceClick}\n          userAvatar={currentUser.avatar}\n          name={currentUser.name}\n          about={currentUser.about}\n          handleSignOut={handleSignOut}\n          email={email}\n          cards={cards}\n          handleCardClick={handleCardClick}\n          handleCardLike={handleCardLike}\n          handleCardDelete={handleCardDelete}\n        />\n       <Route>\n          {loggedIn ? <Redirect to=\"/\" /> : <Redirect to=\"/sign-in\" />}\n       </Route>\n      </Switch>\n\n      <Footer />\n\n      <InfoTooltip\n        isOpen={isInfoTooltipPopupOpen}\n        onClose={closeAllPopups}\n        registered={registered} />\n\n        <EditProfilePopup\n          isOpen={isEditProfilePopupOpen}\n          onClose={closeAllPopups}\n          onUpdateUser={handleUpdateUser}\n          btnValue={loading} />\n\n        <AddPlacePopup\n          isOpen={isAddPlacePopupOpen}\n          onClose={closeAllPopups}\n          onAddPlace={handleAddPlaceSubmit}\n          btnValue={loadingPlace} />\n\n        <ImagePopup\n          card={selectedCard}\n          onClose={closeAllPopups} />\n\n        <ConfirmationPopup />\n\n        <EditAvatarPopup\n          isOpen={isEditAvatarPopupOpen}\n          onClose={closeAllPopups}\n          onUpdateAvatar={handleUpdateAvatar}\n          btnValue={loading} />\n\n      </CurrentUserContext.Provider>\n    </div>\n\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App.js';\nimport reportWebVitals from './reportWebVitals';\nimport { BrowserRouter } from 'react-router-dom';\n\nReactDOM.render(\n  <React.StrictMode>\n    <BrowserRouter >\n      <App />\n    </BrowserRouter>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}